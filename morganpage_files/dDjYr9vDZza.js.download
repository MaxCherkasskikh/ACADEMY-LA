if (self.CavalryLogger) { CavalryLogger.start_js(["Wn\/oY"]); }

__d("VideoViewabilityKeyEvents",[],(function(a,b,c,d,e,f){e.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("MCustomDialog",["DOM","cx","ge"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a={show:function(a){__p&&__p();var b=g.create("div",{className:"_3uug"},null),c=g.create("div",{className:"_3uuh"},g.create("h2",null,a.titleString)),d=g.create("div",{className:"_3uui"},g.create("p",null,a.descriptionString)),e=g.create("p",{className:"_3uuj"},a.dismissButtonString),f=g.create("div",{className:"_3uuk"},e);g.appendContent(b,c);g.appendContent(b,d);g.appendContent(b,f);if(a.confirmButtonString&&a.confirmButtonCallback){var h=g.create("p",{className:"_3uuj"},a.confirmButtonString);g.prependContent(f,h)}var j=g.create("div",{className:"_3uul"},b);e.addEventListener("click",function(){g.remove(j),a.dismissButtonCallback&&a.dismissButtonCallback()});h&&h.addEventListener("click",function(){g.remove(j),a.confirmButtonCallback&&a.confirmButtonCallback()});c=i("root");c&&g.prependContent(c,j)}};e.exports=a}),null);
__d("MFullScreen",[],(function(a,b,c,d,e,f){__p&&__p();a={debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d);d=setTimeout(g,b);h&&a.apply(e,f)}},isSupported:function(){var a=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled,b=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen;return a&&b},isFullScreen:function(){return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},enableFullScreen:function(a){a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullScreen?a.requestFullScreen():a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},disableFullScreen:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.exitFullScreen&&document.exitFullScreen()},listenForFullScreenEvent:function(a,b){var c=this.debounce(b,500),d=["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"];d.forEach(function(b){return a.addEventListener(b,c)});return{remove:function(){d.forEach(function(b){return a.removeEventListener(b,c)})}}},removeFullScreenEventListeners:function(a,b){var c=this.debounce(b,500);a.removeEventListener("webkitfullscreenchange",b);a.removeEventListener("mozfullscreenchange",b);a.removeEventListener("MSFullscreenChange",b);a.removeEventListener("fullscreenchange",c)}};e.exports=a}),null);
__d("VideoPlayerLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",AD_BREAK_STARTING_INDICATOR:"ad_break_starting_indicator",AD_BREAK_NON_INTERRUPTIVE_AD_START:"ad_break_non_interruptive_ad_start",AD_BREAK_NON_INTERRUPTIVE_AD_CLICK:"ad_break_non_interruptive_ad_click",AD_BREAK_PRE_ROLL_AD_START:"ad_break_pre_roll_ad_start",AD_BREAK_TAP_ON_TRAILER:"ad_break_tap_on_trailer",AD_BREAK_TAP_START_FROM_TRAILER:"ad_break_tap_start_from_trailer",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAPTION_CHANGE:"caption_change",CAROUSEL_CHANGE:"carousel_change",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availabilty_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",CLICK:"click",DISPLAYED:"displayed",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",ENTERED_HD:"entered_hd",ERROR:"error",EXITED_FS:"exited_fs",EXITED_HD:"exited_hd",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HEART_BEAT:"heart_beat",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INLINE_CLICK_TO_PLAY:"inline_click_to_play",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAY_REQUESTED_OOB:"play_requested_oob",PLAYER_ALLOCATED:"player_allocated",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",POP_FAILOVER:"pop_failover",PROGRESS:"progress",QUALITY_CHANGE:"quality_change",R2D2_SUMMARY:"r2d2_summary",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REPRESENTATION_FIRST_ENDED:"representation_first_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",SPLASH_DISPLAYED:"splash_displayed",STALE:"stale",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",STREAM_RESET:"stream_reset",SURFACE_UPDATED:"surface_updated",SWITCHED_IMPLEMENTATION:"switched_implementation",UNMUTED:"unmuted",UNPAUSED:"unpaused",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",VIDEO_CLICKED_WITHIN_PLAYER:"video_clicked_within_player",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",WATCH_AND_SCROLL_CHANNEL_ENTERED:"watch_and_scroll_channel_entered",WATCH_AND_SCROLL_EXITED:"watch_and_scroll_exited",WATCH_AND_SCROLL_ICON_HIGHLIGHTED:"watch_and_scroll_icon_highlighted",WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED:"watch_and_scroll_icon_unhighlighted",WATCH_AND_SCROLL_PAUSED:"watch_and_scroll_paused",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",MANIFEST_LOAD_ERROR:"manifest_load_error",PLAYER_WARNING:"player_warning",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",NETWORK_TIMEOUT:"network_timeout",VIDEO_LOGGING_SESSION_TIMEOUT:"video_logging_session_timeout",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",HEADING_RESET:"heading_reset",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED:"spherical_video_fallback_cta_clicked",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",BANZAI_OAUTH_GK_ERROR:"banzai_oauth_gk_error",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error",VIEWABILITY_CHANGED:"viewability_changed"})}),null);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function(a,b,c,d,e,f){function a(){var a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];a.dangerouslyOverrideMediaElementEndedProperty=!0;return a}a.isEnded=function(event){return!!(event&&event.detail&&event.detail.dangerouslyOverrideMediaElementEndedProperty)};e.exports=a}),null);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};e.exports=a}),null);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f,g){function a(a){if(a.readyState>=g.HAVE_METADATA)return a.muted;else return a.hasAttribute("muted")||a.muted}e.exports=a}),null);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=-1,n=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function o(a,event){__p&&__p();a.time_ms=Date.now();var b=event.timeStamp;if(b&&n){var c=Math.floor(b).toString().length,d=Date.now().toString().length,e=window.performance.now();if(c===d+3)b=Math.floor(b/1e3),a.time_ms=b;else if(c===d)a.time_ms=b;else if(b<=e){c=window.performance.timing.navigationStart;a.time_ms=c+Math.floor(b)}}return a}a={initLogger:function(a,b,c){__p&&__p();this._loggedEvents={};this._logFunction=a;this._useEventTime=b;a=this.getVideoElement();c&&this._overwriteVideoCurrentTimeProperty(a);this._lastStartTimePosition=m;this._muted=l(a);this._pausedPosition=m;this._seeking=!1;this._seekSourceTimePosition=m;this._currentTimeAtSeekStart=m;this._volume=a.volume;this._logNextPlayingEvent=!0;this._lastPlayedTime=m;b=!1;a.readyState>=a.HAVE_FUTURE_DATA?this._logReadyToPlay():b=!0;if(this.skipSubscriptions())return;c=this.getSubscriptions();b&&c.addSubscriptions(g.listen(a,"canplay",this._logReadyToPlay.bind(this)));c.addSubscriptions(g.listen(a,"ended",this.onEnded.bind(this)),g.listen(a,"pause",this.onPause.bind(this)),g.listen(a,"playing",this.onPlaying.bind(this)),g.listen(a,"seeked",this.onSeeked.bind(this)),g.listen(a,"seeking",this.onSeeking.bind(this)),g.listen(a,"play",this.onPlay.bind(this)),g.listen(a,"loadedmetadata",this.onLoadedMetadata.bind(this)),g.listen(a,"timeupdate",this.onTimeUpdate.bind(this)),g.listen(a,"volumechange",this.onVolumeChange.bind(this)))},skipSubscriptions:function(){return!1},onCanPlay:function(a){this._logReadyToPlay(a)},onPlay:function(a){this._logNextPlayingEvent=!0,this._ignoreNextPlaying=!1,this._pendingPlayRequest=!0},logHeartbeat:function(){if(i.heartbeatUpdateWatchTime){this._logEvent(j.HEART_BEAT,this._getWatchTimeClosingLogData({}));var a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}else this._logEvent(j.HEART_BEAT)},_getWatchTimeClosingLogData:function(a){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===m?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},a))},_logOnce:function(event,a){if(this._loggedEvents[event])return;this._logEvent(event,a)},_logEvent:function(event,a){__p&&__p();this._loggedEvents[event]=!0;a=a?a:{};a.video_id=this.getVideoID();Object.prototype.hasOwnProperty.call(a,"video_time_position")||(a.video_time_position=this._getVideoCurrentTime());a.time_ms||(a.time_ms=Date.now());a.time=Math.round(a.time_ms/1e3);if(this.getAdClientToken){var b=this.getAdClientToken();b&&(a.ad_client_token=b)}this.getPlayerFormat&&(a.player_format=this.getPlayerFormat());this.getPlayerOrigin&&(a.player_origin=this.getPlayerOrigin());this.getPlayerSuborigin&&(a.player_suborigin=this.getPlayerSuborigin());if(this.getExternalLogIDAndType){b=this.getExternalLogIDAndType();var c=b.externalLogID;b=b.externalLogType;a.external_log_id=c;a.external_log_type=b}this._logFunction(event,a)},_logReadyToPlay:function(){this._logOnce(j.READY_TO_PLAY)},onPause:function(a){__p&&__p();this._logNextPlayingEvent=!0;var b=this.getVideoElement();if(this._pendingPlayRequest){var c={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=!1;this._logEvent(j.CANCELLED_REQUESTED_PLAYING,c);return}c=!!this._getVideoPlayerShakaConfig()&&this._getVideoPlayerShakaConfig().getBool("abort_loading_decisioning_logic",!1);var event=b.ended||c&&k.isEnded(a)?j.FINISHED_PLAYING:j.PAUSED;c=this._getVideoCurrentTime();c&&(this._lastPlayedTime=c);c=this._lastPlayedTime;var d=a.lastPauseReason;if(event===j.FINISHED_PLAYING)c=Math.max(c,b.duration);else if(this.preventPauseLoggingInMixin===!0)return;else this.preventPauseLoggingInMixin===!1&&(d=d||"unloaded");this._logEvent(event,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===m?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:c,debug_reason:d},a));this._lastStartTimePosition=m},onEnded:function(){this._logNextPlayingEvent=!0,this._lastStartTimePosition!==m&&h.isBrowser("IE")&&this.onPause({})},logRepresentationEnded:function(a){__p&&__p();if(a){a={representation_id:a.representationID,next_representation_id:a.nextRepresentationID,stream_switch_reason:a.streamSwitchReason};i.newStateChangeCalculation&&(a=this._getWatchTimeClosingLogData(a));this._logEvent(j.REPRESENTATION_ENDED,a);if(i.newStateChangeCalculation){a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}}},addWatchTimeData:function(a){this._lastStartTimePosition!=m&&this._lastPlayedTime!=m&&(a.video_last_start_time_position=this._lastStartTimePosition,a.video_time_position=this._lastPlayedTime,this._lastStartTimePosition=m);return a},getLastPlayReason:function(){return null},getVideoPlayReason:function(){return null},onPlaying:function(a){__p&&__p();if(!this._logNextPlayingEvent)return;i.superficialUnpauseEventsFix&&(this._logNextPlayingEvent=!1);if(this._ignoreNextPlaying){this._ignoreNextPlaying=!1;return}var b=this.getLastPlayReason();this._pendingPlayRequest=!1;var event=this._loggedEvents[j.STARTED_PLAYING]?j.UNPAUSED:j.STARTED_PLAYING;b=this._amendEventTime({debug_reason:b,video_play_reason:this.getVideoPlayReason()},a);a=this._getVideoCurrentTime();if(i.useCurrentTimeAdjustment){var c=this.getVideoElement().currentTime;c=c-a;b.time_ms-=Math.round(c*1e3)}this._logEvent(event,b);this._lastStartTimePosition=a;this._lastPlayedTime=a;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function(){this._allowNextSeek=!0},onSeeked:function(a){__p&&__p();this._seeking=!1;var b=this._seekSourceTimePosition;this._seekSourceTimePosition=m;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){this._pendingPlayRequest||(this._ignoreNextPlaying=!0);return}this._allowNextSeek=!1;this._ignoreNextPlaying=!1;var c={video_seek_source_time_position:b};this._lastStartTimePosition!==m?c.video_last_start_time_position=this._lastStartTimePosition:c.video_last_start_time_position=b;this._logEvent(j.SCRUBBED,this._amendEventTime(c,a));b=this.getVideoElement();b.paused?this._lastStartTimePosition=m:this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function(a){this._currentTimeAtLoadedMetadataCache=null,this._seeking||(this._seekSourceTimePosition=this._getVideoCurrentTime(),this._seeking=!0),this._currentTimeAtSeekStart=m},onTimeUpdate:function(a){this._currentTimeAtLoadedMetadataCache=null;a=this.getVideoElement();a.paused||(this._lastPlayedTime=this._getVideoCurrentTime())},onVolumeChange:function(a){__p&&__p();var b=this.getVideoElement(),c={},event=null;if(i.useFixedVolumeLogging){var d=b.muted,e=this._muted,f=b.volume,g=this._volume;c.current_volume=Math.round(f*100);this._volume=f;this._muted=d;d=d||f==0;e=e||g==0;if(e&&d)return;if(e!=d)d?event=j.MUTED:event=j.UNMUTED;else{if(g==f)return;f<g?event=j.VOLUME_DECREASE:event=j.VOLUME_INCREASE}}else b.muted!==this._muted&&b.volume===this._volume&&b.volume>0?event=b.muted?j.MUTED:j.UNMUTED:(event=b.volume>this._volume?j.VOLUME_INCREASE:j.VOLUME_DECREASE,c.current_volume=Math.round(b.volume*100)),this._muted=b.muted,this._volume=b.volume;this._logEvent(event,this._amendEventTime(c,a))},_amendEventTime:function(a,event){var b=this._useEventTime;i.fixEventTimeLogging&&(b=b&&event);if(b)return o(a,event);else a.time_ms=Date.now();return a},_getVideoCurrentTime:function(){var a=this._currentTimeAtSeekStart===m?this.getVideoElement().currentTime:this._currentTimeAtSeekStart;a=a.toFixed(2);i.useCurrentTimeAdjustment&&(this._currentTimeAtLoadedMetadataCache!=null&&(a=this._currentTimeAtLoadedMetadataCache.toFixed(2)));return i.fixCurrentTimeType?+a:a},_getVideoPlayerShakaConfig:function(){return this.getVideoPlayerShakaConfig&&typeof this.getVideoPlayerShakaConfig==="function"?this.getVideoPlayerShakaConfig():null},onLoadedMetadata:function(a){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime},_overwriteVideoCurrentTimeProperty:function(a){__p&&__p();var b,c=this;try{var b=function(){var b=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");if(!b)return{v:void 0};if(typeof b.get!=="function"||typeof b.set!=="function")return{v:void 0};Object.defineProperty&&Object.defineProperty(a,"currentTime",{get:function(){return b.get.call(this)},set:function(c){this._currentTimeAtSeekStart===m&&(this._currentTimeAtSeekStart=b.get.call(a)),b.set.call(a,c)}.bind(c),configurable:!0,enumerable:!0})}();if(typeof b==="object")return b.v}catch(a){}}};e.exports=a}),null);
__d("VideoPlayerInitializationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing"})}),null);
__d("VideoPlayerLoggerErrorStates",[],(function(a,b,c,d,e,f){e.exports={PLAYBACK_FAILURE:"playback_failure",PLAYER_FAILURE:"player_failure"}}),null);
__d("VideoPlayerLoggerErrors",[],(function(a,b,c,d,e,f){e.exports={ENTERED_FALLBACK:"entered_fallback",ERROR_CALLING_FLASH:"error_calling_flash"}}),null);
__d("VideoPlayerLoggerFallbackReasons",[],(function(a,b,c,d,e,f){e.exports={TIMEOUT:"timeout",FLASH_ERROR:"flash_error",FLASH_UNAVAILABLE:"flash_unavailable"}}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){e.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLoggerSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",CAMERA_POST:"camera_post",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_VIDEO_LIVE_RECOMMENDATION:"games_video_live_recommendation",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_HOME_STREAMER_HUB:"games_video_home_streamer_hub",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GAMES_VIDEO_SEARCH_UNIT:"games_video_search_unit",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",HTML5:"html5",INLINE:"inline",INSIGHTS:"insights",ISSUES_MODULE:"issues_module",LIVE_BEEPER:"live_beeper",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",OFFERS_DETAIL:"offers_detail",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PAGES_COVER:"pages_cover",PAGES_TIMELINE_PAGES_COVER:"pages_timeline_pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_HOME_HERO:"pages_home_hero",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",PERMALINK:"permalink",PROFILE_OVERVIEW:"profile_overview",PROFILE_COVER:"profile_cover",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SERP_VIDEOS_TAB:"serp_videos_tab",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TAHOE:"tahoe",TOPIC_CHANNEL_LIVING_ROOM:"topic_channel_living_room",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TRIVIA_GAME_ADMIN_DASHBOARD:"trivia_game_admin_dashboard",TV:"tv",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_EXPLORE:"discover",VIDEO_HOME_WATCHLIST:"watchlist",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",WATCH_SCROLL:"watch_scroll",UFI_COMMENT_ATTACHMENT:"ufi_comment_attachment",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll",GAMES_VIDEO_STREAMER_SEARCH_UNIT:"games_video_streamer_unit"})}),null);
__d("VideoPlayerLogger",["Banzai","FBLogger","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerInitializationEvent","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","invariant","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();var t=j.useBanzaiVitalForLive,u=j.discerningAbandonStallLogging,v="video_player",w=5e3,x=function(){return j.useMonotonicallyIncreasingTimers?s():Date.now()};function a(a,b){this.$2=a,this.$3=null,this.$6={},this.$4=b,this.$8=0,this.$9=0,this.$10=0,this.$11=0,this.$7=[],this.$19=0,this.$20=0,this.$12=0,this.$25=!1,this.$16=!1,this.$26(),this.$27()}a.prototype.updateSource=function(a){this.$2=a};a.prototype.getSource=function(){return this.$2};a.prototype.logEvent=function(event,a){__p&&__p();a=babelHelpers["extends"]({},a,this.$4);a.initial_event=!Object.prototype.hasOwnProperty.call(this.$6,event);Object.prototype.hasOwnProperty.call(a,"time_ms")||(a.time_ms=x());Object.prototype.hasOwnProperty.call(a,"time")||(a.time=Math.round(a.time_ms/1e3));a.is_stalling=this.$28();a.error_user_info=this.$29(a.error_user_info);this.$3&&Object.assign(a,this.$3);switch(event){case n.QUALITY_CHANGE:case n.PAUSED:case n.FINISHED_PLAYING:if(this.$24){var b=this.$24,c=b.getABREvaluation();a.ideal_samples=c.idealSamples;a.conservative_samples=c.conservativeSamples;a.aggressive_samples=c.aggressiveSamples;a.conservative_resolution_constrained_samples=c.conservativeResolutionConstrainedSamples;a.last_quality_switch_reason=c.lastQualitySwitchReason;a.reason&&b.setLastQualitySwitchReason(a.reason)}break}switch(event){case n.STARTED_PLAYING:case n.UNPAUSED:this.$25=!0;break;case n.FINISHED_PLAYING:case n.ERROR:case n.PAUSED:this.$25=!1;break}switch(event){case n.REQUESTED_PLAYING:this.$26();this.$30();this.$6[n.STARTED_PLAYING]?a.state=p.UNPAUSED:a.state=p.STARTED;break;case n.STARTED_PLAYING:case n.UNPAUSED:case n.FINISHED_PLAYING:case n.CANCELLED_REQUESTED_PLAYING:case n.ERROR:case n.PAUSED:case n.REPRESENTATION_ENDED:case n.HEART_BEAT:if(event===n.ERROR&&i.disableStallLoggingForError)break;if(event==n.REPRESENTATION_ENDED&&!this.$6[n.STARTED_PLAYING])break;if(event===n.HEART_BEAT&&(!this.$6[n.STARTED_PLAYING]||!j.heartbeatUpdateWatchTimeV2||this.$28()))break;event===n.HEART_BEAT&&(a.v2_heart_beat=!0);(event===n.STARTED_PLAYING||event===n.UNPAUSED)&&(this.$12=a.time_ms,this.$31());if(event===n.ERROR&&a.state!==m.PLAYBACK_FAILURE)break;event===n.CANCELLED_REQUESTED_PLAYING&&(this.$6[n.STARTED_PLAYING]?a.state=p.UNPAUSED:a.state=p.STARTED);this.$32();this.$33();(event===n.PAUSED||event===n.FINISHED_PLAYING)&&(u&&event===n.FINISHED_PLAYING&&this.$31(),a.recent_stalls_count=this.$34());this.$35();this.$36(a);this.$37(a);this.$27();u&&this.$31();this.$26();break}c={logData:a,event:event,scriptPath:this.$1,source:this.$2};event||h("video").warn("Missing event name");this.$6[event]=!0;if(this.$2===q.ANIMATED_IMAGE_SHARE)return null;a.ad_client_token||t&&a.playback_is_live_streaming?g.post(v,c,g.VITAL):j.useVitalForClosing&&(event===n.PAUSED||event===n.FINISHED_PLAYING||event===n.HEART_BEAT)?g.post(v,c,g.VITAL):j.useVitalForOpening&&(event===n.UNPAUSED||event===n.STARTED_PLAYING)?g.post(v,c,g.VITAL):g.post(v,c);return c};a.prototype.setScriptPath=function(a){this.$1=a};a.prototype.setFTData=function(a){this.$3=a};a.prototype.setABRQualityTracker=function(a){this.$24=a};a.prototype.startBuffering=function(a){this.$30(a)};a.prototype.endBuffering=function(){this.$33(),this.$38(),this.$32(),this.$35()};a.prototype.startInterrupt=function(){this.$39()};a.prototype.endInterrupt=function(){this.$33(),this.$38()};a.prototype.$28=function(){return this.$15>0};a.prototype.$30=function(a){if(this.$28())return;this.$16=this.$25;this.$15=Date.now();a!==undefined&&this.$6[n.STARTED_PLAYING]&&(this.$17=a)};a.prototype.$39=function(){if(this.$40())return;this.$21=Date.now()};a.prototype.$40=function(){return this.$21>0};a.prototype.$41=function(){return!this.$40()?0:Date.now()-this.$21};a.prototype.$42=function(){return this.$28()?Date.now()-this.$15:0};a.prototype.$33=function(){if(this.$40()){var a=this.$41();this.$22+=a;this.$20+=a;this.$23+=1;this.$19+=1}};a.prototype.$38=function(){this.$40()&&(this.$21=0)};a.prototype.$27=function(){this.$22=0,this.$23=0,this.$38()};a.prototype.$32=function(){__p&&__p();if(this.$28()){var a=this.$42();this.$17!==null&&(this.$18=a);this.$14+=a;this.$9+=a;this.$13++;this.$8++;this.$16&&(this.$11+=a,this.$10++,this.$16=!1);u&&this.$7.push(x())}};a.prototype.$35=function(){this.$28()&&(this.$15=0)};a.prototype.$29=function(a){return a&&typeof a=="object"?JSON.stringify(a):a};a.prototype.getCumulativeStallCount=function(){return this.$8};a.prototype.getCumulativeInPlayStallCount=function(){return this.$10};a.prototype.getStallCount=function(){return this.$13};a.prototype.getCumulativeStallTime=function(){return this.$9+this.$42()};a.prototype.getCumulativeInPlayStallTime=function(){return this.$11+(this.$16?this.$42():0)};a.prototype.getCumulativeInterruptCount=function(){return this.$19};a.prototype.getCumulativeInterruptTime=function(){return this.$20+this.$41()};a.prototype.$36=function(a){a.stall_time=Math.max(0,this.$14),a.stall_count=this.$13,this.$18&&(a.first_stall_time=this.$18,a.first_stall_start_position=this.$17)};a.prototype.$37=function(a){a.interrupt_time=Math.max(0,this.$22),a.interrupt_count=this.$23};a.prototype.$34=function(){var a=x(),b=a-w;this.$7=this.$7.filter(function(a){return a>=b});u||this.$13>0&&this.$7.push(a);return this.$7.length};a.prototype.$26=function(){this.$14=0,this.$15=0,this.$13=0,this.$17=null,this.$18=0};a.prototype.$31=function(){this.$7=[]};a.prototype.getFTdata=function(){return this.$3};a.Sources=q;a.Errors=l;a.FallbackReasons=o;a.ErrorStates=m;a.PlayerStates=p;e.exports=a}),null);
__d("HVideoPlayerLoggerMixin",["BanzaiODS","EventListener","HVideoPlayerMixin","VideoPlayerLogger","VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();a={};b={initLogger:function(){__p&&__p();h.listen(this.getVideoElement(),"play",function(){return this._onPlayLogUnmute()}.bind(this));this._logger=new j(j.Sources.HTML5);var a=function(event,a){__p&&__p();var b=this.getSavedOffline(),c=this.getConnectivityType(),d=this.getResourceUrl();a=babelHelpers["extends"]({},a,{saved_offline:b,connectivity_type:c,resource_url:d});a=this.addVideoViewabilityToKeyEvents(event,a);event===k.UNMUTED&&(this._unmutedWasLogged=!0);a=Object.assign(a,this.getAdditionalLogData(event));if(event==="paused"){a&&a.video_time_position===-1&&g.bumpEntityKey("MVideoPlayerLoggerMixin","neg_data_video_time_position");b=this.getVideoElement();b&&b.currentTime===-1&&g.bumpEntityKey("MVideoPlayerLoggerMixin","neg_current_time");a&&a.video_time_position===-1&&b&&b.currentTime===-1&&g.bumpEntityKey("MVideoPlayerLoggerMixin","neg_data_video_time_position_and_current_time")}this._logger.logEvent(event,a)}.bind(this);i.initLogger.call(this,a)},_onPlayLogUnmute:function(){var a=this.getLastPlayReason();!this._unmutedWasLogged&&!this.getVideoElement().muted&&a=="user_initiated"&&this._logEvent(k.UNMUTED)},getLogger:function(){return this._logger},getAdClientToken:function(){if(this.getConfig){var a=this.getConfig();if(a.ad_client_token)return a.ad_client_token}},getSavedOffline:function(){return null},logDisplayed:function(){this._logEvent(k.DISPLAYED,{is_auto_played:!0})},logPauseEvent:function(a){this.onPause(a?a:{})},logEvent:function(event,a){this._logEvent(event,a)}};Object.assign(a,i);Object.assign(a,b);e.exports=a}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!0,i=a.navigator.connection,j={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function b(){return h}function c(a){if(a==h)return;h=a;l.emit(a?"online":"offline")}function d(){return i?i.bandwidth:h?Infinity:0}function f(){return i?i.metered:!1}function k(){var a=i?String(i.type):"0";return j[a]||a}var l={getBandwidth:d,getType:k,isMetered:f,isOnline:b,setOnline:c};g(l,{online:!0,offline:!0});a.addEventListener?(a.addEventListener("online",c.bind(null,!0)),a.addEventListener("offline",c.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",c.bind(null,!0)),a.attachEvent("offline",c.bind(null,!1)));e.exports=l}),null);
__d("MVideoUtils",["Bootloader","CSS","DataAttributeUtils","DOM","MVideoExperiments","Network","cx","getViewportDimensions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=.5,p=0,q=null,r=null,s=null,t={PLAY_SIGIL:"playInlineVideo",INSERTION_POINT_SIGIL:"inlineVideo",LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",FULL_WIDTH_PLAYER_CLASS:"_2c9v",SHOW_PAUSE_CLASS:"_3gzh",SPHERICAL_CLASS:"_4a1j",DEBUGGER_CLASS:"_4551",PLAYER_ID:{video:"mInlineVideoPlayer",iframe:"mInlineVideoFrame"},PLAYER_ATTRS:{video:function(a){return{autobuffer:"true",controls:a?undefined:"controls","x-webkit-airplay":"allow",controlslist:"nodownload"}},iframe:function(){return{frameBorder:0}}},PLAYER_STATE:{playing:"playing",paused:"paused"},createNodeFromTag:function(a,b,c,d){var e=null;b||!c||c.id!==this.PLAYER_ID[a]?e=j.create(a,this.PLAYER_ATTRS[a](!!b)):e=c;e.id=this.PLAYER_ID[a];h.conditionClass(e,this.FULL_WIDTH_PLAYER_CLASS,d);h.conditionClass(e,this.PLAYER_CLASS,!0);return e},getStoryNode:function(a){return a&&a.getNode("story-div")},_handleLoggingOnPlayWithBootload:function(a,b,c,d){__p&&__p();if(q.isLoggedIn()){d=this.getStoryNode(a)||d;if(d){a=i.getDataFt(d);if(a){d={ft:JSON.parse(a)};if(b){b=b.getLogger();b.setFTData(d)}c.fbid&&c.ownerID&&(a=r.parse(a,e.id),a.video_info={video_id:c.fbid,owner_id:c.ownerID},a=r.stringify(a));new s("/feedtracking/").setMethod("POST").setData({ft_data:a,clicked_uri:c.src,tn:c.trackingNodes}).send()}}}},handleLoggingOnPlay:function(a,b,c,d){g.loadModules(["CurrentUser","FBJSON","MRequest"],function(e,f,g){q=e,r=f,s=g,t._handleLoggingOnPlayWithBootload(a,b,c,d)},"MVideoUtils")},getHumanReadbleSize:function(a){var b=1e3,c=b*b;b=b*b*b;if(a>b)return this.formatNumber(a,b,2)+" GB";else return this.formatNumber(a,c,1)+" MB"},formatNumber:function(a,b,c){return Math.ceil(a/(b/Math.pow(10,c)))/Math.pow(10,c)},getDownloadProgressText:function(a,b){return t.getHumanReadbleSize(a)+" / "+t.getHumanReadbleSize(b)},getDownloadProgressPercentage:function(a,b){a=a/b*100;a=a.toFixed(1);return a.toString()},getConnectivityType:function(){var a=l.getType(),b=null;a=="wifi"||a=="WIFI"?b="WIFI":(a=="cellular"||a=="2g"||a=="3g"||a=="wwan")&&(b="MOBILE");return b},getNetworkBandwidth:function(){var a=null;"connection"in navigator&&("downlinkMax"in navigator.connection&&(a=navigator.connection.downlinkMax));var b=null;try{b=parseFloat(a)}catch(a){}return typeof b!=="number"||isNaN(a)?null:b},getAvailableQualitiesString:function(a){return a&&a.join(", ")},setAttributes:function(a,b){b.spherical&&a.setAttribute("crossorigin","anonymous"),a.setAttribute("playInFullScreen",b.playInFullScreen),b.playInFullScreen||k.addPlaysInline&&a.setAttribute("playsinline",!0),b.muted&&(a.muted=!0)},isVisible:function(a){var b=n().height,c=n().width;if(a.height===0)return!1;var d=a.y-p+(1-o)*a.height,e=a.y+o*a.height,f=a.x+(1-o)*a.width;a=a.x+o*a.width;return d<0||e>=b||f<0||a>=c?!1:!0}};e.exports=t}),null);
__d("MInlineVideoDebugger",["CSS","DOM","MVideoUtils"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();function a(a,b){"use strict";this.$6=b,this.$7(a),this.$8(),this.$9(),this.$10(),this.$11()}a.prototype.$7=function(a){"use strict";this.$1=h.create("div"),g.conditionClass(this.$1,i.DEBUGGER_CLASS,!0),h.insertAfter(a,this.$1)};a.prototype.$8=function(){"use strict";this.$2=h.create("div"),h.appendContent(this.$1,this.$2)};a.prototype.$9=function(){"use strict";this.$3=h.create("div"),h.appendContent(this.$1,this.$3)};a.prototype.$10=function(){"use strict";this.$4=h.create("div"),h.appendContent(this.$1,this.$4)};a.prototype.$11=function(){"use strict";this.$5=h.create("div"),h.appendContent(this.$1,this.$5),this.updateVideoIdDebugger(this.$6.videoID)};a.prototype.updateViewabilityLoggingDebugger=function(a){"use strict";h.setContent(this.$2,"viewability:"+a)};a.prototype.updatePlayerStateDebugger=function(a){"use strict";h.setContent(this.$3,"player state:"+a)};a.prototype.updateLastActionReasonDebugger=function(a){"use strict";h.setContent(this.$4,"lastActionReason:"+a)};a.prototype.updateVideoIdDebugger=function(a){"use strict";h.setContent(this.$5,"video ID:"+a)};a.prototype.cleanUp=function(){"use strict";h.remove(this.$1)};e.exports=a}),null);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h.ArrayStrategies,j=h.checkArrayStrategy,k=h.checkMergeArrayArgs,l=h.checkMergeLevel,m=h.checkMergeObjectArgs,n=h.isTerminal,o=h.normalizeMergeArg,p=function(a,b,c,d){m(a,b);l(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];r(a,b,g,c,d)}},q=function(a,b,c,d){k(a,b);l(d);if(c===i.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)r(a,b,f,c,d)}},r=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var h=b&&n(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],m=Object.prototype.hasOwnProperty.call(a,c),o=m&&n(l),r=m&&Array.isArray(l),s=m&&!r&&!r;o?h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):b||(a[c]=l):r?h?a[c]=f:j?(i[d]||g(0),d===i.Clobber&&(l.length=0),q(l,f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):!b:s?h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?p(l,f,d,e+1):!b:m||(h?a[c]=f:j?(a[c]=[],q(a[c],f,d,e+1)):k?(a[c]={},p(a[c],f,d,e+1)):!b)};a=function(a,b,c){b=o(b);j(c);p(a,b,c,0)};e.exports=a}),null);
__d("AsyncStorage",["Deferred","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i.ArrayStrategies,k=window.indexedDB,l=1,m="data",n=!1,o=void 0;b=Date.now();var p=new g();function a(){__p&&__p();var a=k.open("AsyncStorage",l);a.onerror=function(event){var a=new Error("Failed to open AsyncStorage IndexedDB instance.");!1;p.reject(a)};a.onsuccess=function(event){n&&!1,o=event.target.result,p.resolve({db:o}),o.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);!1;p.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(m))return;a.createObjectStore(m,{keyPath:"key"})}}k&&a();function q(a,b){if(o)try{a()}catch(a){!1,b&&b(a)}else p.then(function(){n&&!1,q(a,b)},function(a){!1,b&&b(a)})}c={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==undefined&&c[0]!==undefined&&typeof c[0][1]!==undefined?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(n&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];n&&!1;b.update(d)}else c.push(a)})},multiMerge:function(a,b){__p&&__p();this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value,e=JSON.parse(d.value);h(e,JSON.parse(a[1]),j.Clobber);n&&!1;d.value=JSON.stringify(e);b.update(d)}else n&&!1,c.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(n&&!1,b["delete"]())})},getAllKeys:function(a){__p&&__p();q(function(){__p&&__p();var b=o.transaction([m],"readonly");b=b.objectStore(m).openCursor();var c=[];b.onsuccess=function(event){var b=event.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(){return a(null,[])})},clear:function(a){__p&&__p();q(function(){__p&&__p();var b=o.transaction([m],"readwrite");b=b.objectStore(m).openCursor();b.onsuccess=function(event){var b=event.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(){return a(null)})},_multiOp:function(a,b,c,d,e){__p&&__p();q(function(){__p&&__p();var f=!1,g=a.slice().sort(function(a,b){__p&&__p();a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");!1;c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=o.transaction([m],b),i=h.objectStore(m).openCursor(),j=[],k=0;i.onsuccess=function(event){__p&&__p();var a=event.target.result;if(!a){while(k<g.length)e(g[k],a,j),k++;l();return}var b=a.key;n&&!1;while(d(g[k])<=b){n&&!1;e(g[k],a,j);k++;if(k===g.length){l();return}}b=d(g[k]);a["continue"](b)};function l(){var a=h.objectStore(m);j.forEach(function(b){n&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(event){var a=new Error("IndexedDB error: "+event.target.error.message);!1;c&&c([a])};n&&!1},function(a){c&&c([a])})}};e.exports=c}),null);
__d("MVideoCacheConfig",["CurrentUser","MVideoDownloadConfig","md5","WebStorage"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k={CACHE_PREFIX:"vc",PREFIX_SEPARATOR:"_",CONFIG_PREFIX:"config",KEYS:{lastCleanUp:"lastCleanUp"},isSupported:function(){try{j||(j=b("WebStorage"));return j.getLocalStorage()}catch(a){j=null;return!1}},currentAccountHash:function(){var a=""+g.getAccountID();return i(a)},getUserPrefix:function(){return k.CACHE_PREFIX+k.PREFIX_SEPARATOR+k.currentAccountHash()+k.PREFIX_SEPARATOR},getCacheConfigKey:function(){return k.CACHE_PREFIX+k.PREFIX_SEPARATOR+k.CONFIG_PREFIX+k.PREFIX_SEPARATOR+k.currentAccountHash()},initCacheConfig:function(){var a={},b=Date.now()-2*h.cache_sync_interval_ms;a[k.KEYS.lastCleanUp]=b;a=JSON.stringify(a);b=k.getCacheConfigKey();j.getLocalStorage().setItem(b,a);return a},getCacheConfig:function(){var a=k.getCacheConfigKey();a=j.getLocalStorage().getItem(a);try{JSON.parse(a)}catch(b){a=null}a===null&&(a=k.initCacheConfig());a=JSON.parse(a);return a},getItemFromConfig:function(a){var b=k.getCacheConfig();return b[a]},setItemFromConfig:function(a,b){var c=k.getCacheConfig();c[a]=b;c=JSON.stringify(c);a=k.getCacheConfigKey();j.getLocalStorage().setItem(a,c)}};e.exports=k}),null);
__d("XHRRequestRetrier",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=!1,this.$3=0,this.$4=0,this.$5=0,this.$6=1e3,this.$7=2,this.$8=.5,this.$9=a.getErrorHandler(),a.setErrorHandler(this.$11.bind(this)),this.$10=a.getAbortHandler(),a.setAbortHandler(this.$12.bind(this))}a.prototype.setMaxAttempts=function(a){"use strict";this.$5=a;return this};a.prototype.setBaseRetryDelayMs=function(a){"use strict";this.$6=a;return this};a.prototype.setRetryBackoffFactor=function(a){"use strict";this.$7=a;return this};a.prototype.setRetryFuzzFactor=function(a){"use strict";this.$8=a;return this};a.prototype.send=function(){"use strict";if(this.$2)return;if(this.$1.getTimeout())throw new Error("Not supported.");this.$3++;this.$4||(this.$4=this.$6);this.$1.send()};a.prototype.$11=function(){"use strict";this.$3<this.$5?this.$13():this.$9&&this.$9.apply(this,arguments)};a.prototype.$12=function(){"use strict";this.$2=!0,this.$10&&this.$10.apply(this,arguments)};a.prototype.$13=function(){"use strict";var a=this.send.bind(this),b=Math.random()*2-1;b=b*this.$8;b=this.$4*(1+b);g(a,b);this.$4*=this.$7};e.exports=a}),null);
__d("URIDownloader",["invariant","URI","XHRRequest","XHRRequestRetrier"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=2e5,l=15,m=2e3,n=1.5;function a(a,b){"use strict";this.$1=new h(a),this.$2=b,this.$3=0,this.$4=0,this.$5=[]}a.prototype.setResponseHandler=function(a){"use strict";this.$10&&g(0);this.$9=a;return this};a.prototype.setChunkedResponseHandler=function(a){"use strict";this.$9&&g(0);this.$10=a;return this};a.prototype.setErrorHandler=function(a){"use strict";this.$11=a;return this};a.prototype.setAbortHandler=function(a){"use strict";this.$12=a;return this};a.prototype.setProgressHandler=function(a){"use strict";this.$13=a;return this};a.prototype.$14=function(a){"use strict";if(this.$8)return;this.$13&&this.$13({total:this.$2,loaded:this.$4+(a?a:0)})};a.prototype.$15=function(){"use strict";if(this.$8)return;if(this.$9){var a=null;this.$5&&(a=new Blob(this.$5));this.$9(a)}this.$10&&this.$10(this.$5)};a.prototype.$16=function(a){"use strict";if(this.$8)return;this.$17(a)?this.$4<this.$2?(this.$14(),this.$18()):this.$15():this.$19()};a.prototype.$19=function(){"use strict";if(this.$8)return;this.$11&&this.$11()};a.prototype.$20=function(){"use strict";if(this.$8)return;this.$12&&this.$12()};a.prototype.$21=function(){"use strict";var a=Math.min(this.$4+k,this.$2);this.$3=a-this.$4};a.prototype.$17=function(a){"use strict";if(this.$8)return!1;if(this.$3!==a.size)return!1;this.$5.push(a);this.$4+=this.$3;this.$3=0;return!0};a.prototype.$18=function(){"use strict";__p&&__p();if(this.$8)return;var a=new i(this.$1).setMethod("GET").setResponseType("blob").setResponseHandler(this.$16.bind(this)).setErrorHandler(this.$19.bind(this)).setAbortHandler(this.$20.bind(this)).setDownloadProgressHandler(function(a){a.loadedBytes&&this.$14(a.loadedBytes)}.bind(this));this.$21();a.setRequestHeader("Range","bytes="+this.$4+"-"+(this.$4+this.$3-1));this.$7=a;a=new j(a).setMaxAttempts(l).setBaseRetryDelayMs(m).setRetryBackoffFactor(n);this.$6=a;try{a.send()}catch(a){this.$19()}};a.prototype.sendRequest=function(){"use strict";this.$4=0,this.$18()};a.prototype.abort=function(){"use strict";this.$8=!0,this.$7&&this.$7.abort?this.$7.abort():this.$12&&this.$12(),this.$22()};a.prototype.$22=function(){"use strict";this.$7=null,this.$5=null,this.$12=null,this.$11=null,this.$9=null,this.$13=null};e.exports=a}),null);
__d("VideoDownloadDeleteReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CACHE_SYNC:"cache_sync",CONSISTENCY_CHECK:"consistency_check",USER_INITIATED:"user_initiated",CHUNKED_PLAYBACK_NOT_SUPPORTED:"chunked_playback_not_supported"})}),null);
__d("XVideoDownloadEventController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_download_event/",{video_id:{type:"Int",required:!0},viewer_id:{type:"Int",required:!0},app_id:{type:"Int",required:!0},event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("VideoDownloadEventHandler",["CurrentUser","DataAttributeUtils","MRequest","XVideoDownloadEventController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=412378670482;function a(a,b,event){"use strict";this.$1=a,this.$2=b,this.$3=event}a.prototype.sendServerDownloadEvent=function(){"use strict";var a=j.getURIBuilder().setInt("video_id",this.$1).setInt("viewer_id",g.getAccountID()).setInt("app_id",k).setEnum("event",this.$3).getURI(),b=null;this.$2&&(b=h.getDataFt(this.$2));new i(a).setMethod("POST").setData({ft_data:b}).send()};e.exports=a}),null);
__d("VideoDownloadLogger",["Bootloader","CurrentUser","md5"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k=null,l=2147483647,m="video_download";function n(){return Date.now()}function o(a){"use strict";a=a?a:{},this.$1=a}o.prototype.$2=function(event,a){"use strict";a=babelHelpers["extends"]({},a,this.$1);!event;Object.prototype.hasOwnProperty.call(a,"time_ms")||(a.time_ms=n());Object.prototype.hasOwnProperty.call(a,"connectivity_type")||(a.connectivity_type=k.getConnectivityType());a={logData:a,event:event};j.post(m,a)};o.prototype.logEvent=function(event,a){"use strict";!j||!k?g.loadModules(["Banzai","MVideoUtils"],function(b,c){j=b,k=c,this.$2(event,a)}.bind(this),"VideoDownloadLogger"):this.$2(event,a)};o.time=function(){"use strict";return Math.floor(Date.now()/1e3)};o.generateSessionID=function(){"use strict";return i([h.getID(),o.time(),Math.random()*l].join(":"))};e.exports=o}),null);
__d("VideoDownloadLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTROL_IMPRESSION:"control_impression",DOWNLOAD_CANCELLED:"download_cancelled",DOWNLOAD_DELETED:"download_deleted",DOWNLOAD_FAILED:"download_failed",DOWNLOAD_FINISHED:"download_finished",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_REQUESTED:"download_requested",SLOW_PLAYBACK_DETECTED:"slow_playback_detected",SURVEY_URI_REQUESTED:"survey_uri_requested",SURVEY_IMPRESSION_ATTEMPT:"survey_impression_attempt",SURVEY_PROMPT_RESULT:"survey_prompt_result",QUALITY_SELECTED:"quality_selected",QUALITY_SELECTOR_IMPRESSION:"quality_selector_impression",QUALITY_SELECTOR_NO_QUALITIES_AVAILABLE:"quality_selector_no_qualities_available",REQUESTED_PLAYING:"requested_playing",PAGE_SETTING_CHANGE:"page_setting_change"})}),null);
__d("VideoDownloadLoggerFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_ID:"app_id",AVAILABLE_QUALITIES:"available_qualities",AVAILABLE_QUALITIES_COUNT:"available_qualities_count",BYTES_DOWNLOADED:"bytes_downloaded",CONFIG_NAME:"config_name",CONNECTIVITY_TYPE:"connectivity_type",DELETE_REASON:"delete_reason",DEVICE_YEAR_CLASS:"device_year_class",DOWNLOAD_ORIGIN:"download_origin",DOWNLOAD_SETTING:"download_setting",ELAPSED_TIME_MS:"elapsed_time_ms",ERROR:"error",ERROR_CODE:"error_code",EVENT_NAME:"event_name",EVENT_ORIGIN:"event_origin",EVENT_SUBORIGIN:"event_suborigin",IS_EMPLOYEE:"is_employee",IS_VISIBLE:"is_visible",OWNER_ID:"owner_id",QUALITY:"quality",REASON:"reason",SAVED_OFFLINE:"saved_offline",SESSION_ID:"session_id",TOTAL_SIZE:"total_size",TIME_MS:"time_ms",VIDEO_ID:"video_id"})}),null);
__d("VideoDownloadReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_INITIATED:"auto_initiated",USER_INITIATED:"user_initiated"})}),null);
__d("MVideoCache",["VideoDownloadEventHandler","VideoDownloadLogger","VideoDownloadLoggerEvent","VideoDownloadLoggerFields","VideoDownloadDeleteReason","VideoDownloadReason","emptyFunction","MLegacyDataStore","URIDownloader","MVideoCacheConfig","MVideoDownloadConfig","AsyncStorage","WebStorage"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=null,s=null,t={},u=500,v=4e9,w=0,x={audio:"audio",video:"video"};function y(a,b){"use strict";this.$1=a,this.$2=b,a.chunked?this.$3=b===x.video?a.videoChunkCount:a.audioChunkCount:this.$3=1,this.$4=0}y.prototype.getNextBuffer=function(a){"use strict";if(this.$4>=this.$3)a(null);else{var b=this.$4++;z.getCachedStream(this.$1,this.$2,function(b){a(b)},a,this.$1.chunked?b:null)}};var z={DEFAULT_QUALITY_TAG:"default",DOWNLOAD_STARTED_TIME:"downloadStartedTime",DOWNLOAD_REASON:"downloadReason",OFFLINE_LIFESPAN:"offlineLifespan",VIEW_COUNT:"viewCount",RESOURCE_STATE:{loading:"loading",finished:"finished",error:"error"},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function(){return!z.isEmptyObject(t)},isSupported:function(){try{r||(r=b("AsyncStorage"));s||(s=b("WebStorage"));return s.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota}catch(a){r=null;s=null;return!1}},downloadVideo:function(a,b,c,d,e,f){__p&&__p();var g=arguments.length<=6||arguments[6]===undefined?{}:arguments[6],h=arguments.length<=7||arguments[7]===undefined?l.USER_INITIATED:arguments[7],k=arguments.length<=8||arguments[8]===undefined?null:arguments[8],m=JSON.parse(b),n=z.createVideoResource(m,f),o=z.createAudioResource(m,f);if(!n&&!o){d();return}var p=[];n&&p.push(n);o&&p.push(o);var q=z.calculateTotalSize(b,f),r=z.createTracking(a,q,m.offline_lifespan_ms,c,d,e,f,g.origin,h,k);if(!r){d();return}var s={};s[j.EVENT_ORIGIN]=g.origin;s[j.EVENT_SUBORIGIN]=g.suborigin;z.logEventTracking(r,i.DOWNLOAD_REQUESTED,s);z.flushAsyncStorage(function(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,b){var c=z.getTotalSizeOfLoadingResources();if(a+r.totalSize+c<z.getMaxCacheUsage()&&r.totalSize+c+z.getMinFreeSpace()<b)z.downloadPostQuotaCheck(r,n,o);else{c="Used: "+a+" Remaining: "+b+" MaxCacheUsage: "+z.getMaxCacheUsage()+" MinFreeSpace: "+z.getMinFreeSpace();z.onError(r,z.ERROR.QUOTA_EXCEEDED,c)}},function(){z.onError(r,z.ERROR.QUOTA_EXCEEDED)})})},getDownloadNotificationUri:function(a){a=JSON.parse(a);return a&&a.download_finished_notification_uri},deleteVideoByID:function(a,b,c){__p&&__p();var d=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];b=b?b:m;var e=z.getTracking(a),f={};f[j.EVENT_ORIGIN]=d.origin;f[j.EVENT_SUBORIGIN]=d.suborigin;f[j.REASON]=c||k.USER_INITIATED;if(e)z.logEventTracking(e,i.DOWNLOAD_CANCELLED,f),z.deleteTracking(e,!0);else{z.logEvent(a,i.DOWNLOAD_DELETED,f);var h=new g(a,null,i.DOWNLOAD_DELETED);h.sendServerDownloadEvent()}z.deleteCachedVideoFromStorage(a,b)},calculateTotalSize:function(a,b){a=JSON.parse(a);a=z.getStreamsForQuality(a,b);return a&&z.calculateTotalSizeInState(a,undefined)},getQualitiesFromResources:function(a){__p&&__p();a=JSON.parse(a);a=a&&a.streams;if(!a)return null;var b=null,c={};for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(x.video)){var g=Object.prototype.hasOwnProperty.call(e,"quality")&&String(e.quality);g&&(c[g]=e.size)}else f&&f.startsWith(x.audio)&&(b=e)}if(b)for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&c[h]&&(c[h]+=b.size);return c},deleteVideosByID:function(a,b,c){if(z.isSupported())for(var d=0;d<a.length;d++){var e=a[d];z.deleteVideoByID(e,function(){b(e)},c)}},isVideoDownloaded:function(a){if(z.isSupported()){a=z.getCachedVideoByID(a);if(a)return!0;else return!1}return!1},isVideoDownloading:function(a){return z.isSupported()?t&&t[a]:!1},getVideoSize:function(a,b,c){__p&&__p();if(z.isSupported()){var d=z.getTracking(a);if(d)return d.totalSize;d=z.getCachedVideoByID(a);if(d)return d.totalSize;if(b){a=z.calculateTotalSize(b,c);if(a&&a>0)return a}}return null},getVideoProgressByID:function(a){if(z.isSupported()){a=z.getTracking(a);if(a)return a.loaded}return 0},_fillMissingFieldsWithDefaults:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d===z.DOWNLOAD_STARTED_TIME&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.downloadStartedTime=0);d===z.DOWNLOAD_REASON&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.downloadReason=l.USER_INITIATED);d===z.OFFLINE_LIFESPAN&&!Object.prototype.hasOwnProperty.call(a,d)&&(a.offlineLifespan=q.cache_default_offline_lifespan_ms)}return a},getCachedVideoByID:function(a){__p&&__p();if(!q.enabled&&!q.simulate_legacy_ux)return null;var b=z.createPrefix(a),c=null;try{c=s.getLocalStorage().getItem(b)}catch(a){}b=c&&JSON.parse(c);b=b&&z._fillMissingFieldsWithDefaults(b,[z.DOWNLOAD_STARTED_TIME,z.DOWNLOAD_REASON,z.OFFLINE_LIFESPAN]);if(q.simulate_legacy_ux)return null;if(b&&b.chunked&&!q.cache_chunked_playback_enabled){setTimeout(function(){z.deleteVideoByID(a,m,k.CHUNKED_PLAYBACK_NOT_SUPPORTED)},0);return null}return b},getCachedVideosMetadata:function(){__p&&__p();var a=arguments.length<=0||arguments[0]===undefined?[]:arguments[0],b=arguments.length<=1||arguments[1]===undefined?!1:arguments[1],c={};if(!z.isSupported())return c;var d=s.getLocalStorage(),e=Object.keys(d),f=p.getUserPrefix();for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)&&e[g]&&e[g].startsWith(f)){var h=z.getVideoIDFromStorageKey(e[g]),i={};if(a.length>0){var j=null;try{j=d.getItem(e[g])}catch(a){if(!b)continue}var k=j&&JSON.parse(j);if((!k||k.chunked&&!q.cache_chunked_playback_enabled)&&!b)continue;for(var l=0;l<a.length;l++){var m=a[l];k&&m in k&&(i[m]=k[m])}i=z._fillMissingFieldsWithDefaults(i,a)}c[h]=i}return c},getCachedVideoIDs:function(){var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];return Object.keys(z.getCachedVideosMetadata([],a))},hasDownloadedVideos:function(){var a=z.getCachedVideoIDs();return a&&a.length&&a.length>0},getDownloadingVideos:function(){var a=Object.keys(t);return a},getVideoIDFromStorageKey:function(a){var b=p.PREFIX_SEPARATOR;return a.split(b)[2]||""},getCachedVideo:function(a){a=n.get(a);return z.getCachedVideoByID(a.videoID)},getCachedVideoStream:function(a,b,c){z.getCachedStream(a,x.video,b,c)},getCachedAudioStream:function(a,b,c){z.getCachedStream(a,x.audio,b,c)},getCachedVideoStreamObject:function(a){return new y(a,x.video)},getCachedAudioStreamObject:function(a){return new y(a,x.audio)},getMaxCacheUsage:function(){var a=v;q&&Object.prototype.hasOwnProperty.call(q,"max_cache_usage")&&(a=q.max_cache_usage);return a},getMinFreeSpace:function(){var a=w;q&&Object.prototype.hasOwnProperty.call(q,"min_free_space")&&(a=q.min_free_space);return a},downloadPostQuotaCheck:function(a,b,c){if(!z.addTracking(a)){z.onError(a);return}b&&z.sendResourceRequest(a,b);c&&z.sendResourceRequest(a,c)},calculateTotalSizeInState:function(a,b){var c,d=0,e=a.length;for(c=0;c<e;c++){var f=a[c];(!b||f.state===b)&&(d+=f.size)}return d},isEmptyObject:function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)&&a[b])return!1;return!0},getTotalSizeOfLoadingResources:function(){var a=0;for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)&&t[b]){var c=t[b];a+=z.calculateTotalSizeInState(c.resources,z.RESOURCE_STATE.loading)}return a},deleteCachedVideoFromStorage:function(a,b){__p&&__p();a=z.createPrefix(a);try{s.getLocalStorage().removeItem(a)}catch(a){}z.getObjectKeysFromAsyncStorageByPrefix(a,function(a,c){if(a||!c){b();return}try{r.multiRemove(c,function(){b()})}catch(a){b()}})},flushAsyncStorage:function(a){__p&&__p();var b=z.createPrefix(0),c=["0"];c=new Blob(c,{type:"text/html"});try{r.setItem(b,c,function(){try{r.removeItem(b,function(){a()})}catch(b){a()}})}catch(c){try{r.removeItem(b,function(){a()})}catch(b){a()}}},getObjectKeysFromAsyncStorageByPrefix:function(a,b){__p&&__p();try{r.getAllKeys(function(c,d){if(c||!d){b(c);return}d=d.filter(function(b){return b.startsWith(a)});b(null,d)})}catch(a){b(a)}},getVideosFromAsyncStorage:function(a){__p&&__p();z.getObjectKeysFromAsyncStorageByPrefix(p.getUserPrefix(),function(b,c){if(b||!c){a(b);return}b=c.map(z.getVideoIDFromStorageKey);c=b.reduce(function(a,b){a[b]=!0;return a},{});a(null,Object.keys(c))})},makeLocalAsyncStorageConsistent:function(a,b){__p&&__p();var c=z.getCachedVideoIDs(!0);z.getVideosFromAsyncStorage(function(d,e){__p&&__p();if(d||!e){a();return}var f={};d=c.concat(e);d.forEach(function(a){!f[a]?f[a]=1:f[a]++});f=Object.keys(f).filter(function(a){return f[a]===1});f.length>0&&z.deleteVideosByID(f,b,k.CONSISTENCY_CHECK);a()})},getCachedStream:function(a,b,c,d,e){b=z.createPrefix(a.videoID,b,e);try{r.getItem(b,function(b,e){b?(z.deleteVideoByID(a.videoID),d()):c(e)})}catch(b){z.deleteVideoByID(a.videoID),d()}},saveVideoInLocalStorage:function(a){var b=a.videoID&&z.createPrefix(a.videoID);try{s.getLocalStorage().setItem(b,JSON.stringify(a))}catch(a){throw a}},saveCachedVideo:function(a){__p&&__p();var b={};b.downloadStartedTime=a.downloadStartedTime;b.downloadReason=a.downloadReason;b.videoID=a.videoID;b.quality=a.quality;b.audioCodec=z.getResourceCodec(a,x.audio);b.videoCodec=z.getResourceCodec(a,x.video);b.totalSize=a.totalSize;b.offlineLifespan=a.offlineLifespan;b.viewCount=0;b.sessionID=a.sessionID;b.downloadOrigin=a.origin;b.chunked=a.chunked;b.videoChunkCount=a.videoChunkCount;b.audioChunkCount=a.audioChunkCount;z.saveVideoInLocalStorage(b)},logPlaybackRequest:function(a,b,c){__p&&__p();var d=null;if(b){b=z.getCachedVideoByID(a);var e=b.viewCount||0;b.viewCount=e+1;z.saveVideoInLocalStorage(b)}else d=z.ERROR.NO_ACCESS;e={};e[j.ERROR_CODE]=d;e[j.REASON]=c;z.logEvent(a,i.REQUESTED_PLAYING,e)},createPrefix:function(a,b,c){a=p.getUserPrefix()+a+p.PREFIX_SEPARATOR+z.DEFAULT_QUALITY_TAG;b&&(a=a+p.PREFIX_SEPARATOR+b);c!=undefined&&c!=null&&(a=a+p.PREFIX_SEPARATOR+c);return a},createResource:function(a,b,c,d){var e={};e.src=a;e.type=b;e.state=z.RESOURCE_STATE.loading;e.codec=c;e.size=d;e.progress=0;return e},getDefaultVideoStream:function(a){__p&&__p();var b=null;for(var c=0;c<a.length;c++){var d=a[c],e=String(d.mimetype);if(e&&e.startsWith(x.video)){b=d;if(d["default"])return d}}return b},getStreamsForQuality:function(a,b){__p&&__p();var c=[];a=a&&a.streams;var d=!1,e=!1;for(var f=0;f<a.length;f++){var g=a[f],h=String(g.mimetype);if(h&&h.startsWith(x.video)&&!d){var i=String(g.quality);b&&i&&i===b&&(d=!!c.push(g))}else h&&h.startsWith(x.audio)&&!e&&(e=!!c.push(g))}if(!d){i=z.getDefaultVideoStream(a);i&&c.push(i)}return c},getUrlInfo:function(a,b,c){__p&&__p();a=z.getStreamsForQuality(a,c);if(!a)return null;c=null;for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(b)){c=e;break}}return c},createVideoResource:function(a,b){a=z.getUrlInfo(a,x.video,b);return a&&z.createResource(a.url,x.video,a.codecs,a.size)},createAudioResource:function(a,b){a=z.getUrlInfo(a,x.audio,b);return a&&z.createResource(a.url,x.audio,a.codecs,a.size)},addTracking:function(a){if(t[a.videoID])return!1;t[a.videoID]=a;return!0},createTracking:function(a,b,c,d,e,f,g,i,j,k){__p&&__p();var l={};l.videoID=a;l.quality=g||z.DEFAULT_QUALITY_TAG;l.onDone=d;l.onError=e;l.onProgress=f;l.resources=[];l.deleted=!1;l.loaded=0;l.totalSize=b;l.offlineLifespan=c;l.sessionID=h.generateSessionID();l.origin=i;l.logger=z.createLogger(l);l.downloadStartedTime=Date.now();l.chunked=q.cache_chunked_storage_enabled;l.loggingDataCallback=k;l.downloadReason=j;return l},getTracking:function(a){return t[a]},deleteTracking:function(a,b){__p&&__p();var c={};c[j.REASON]=a.downloadReason;if(!a.deleted){a.deleted=!0;t[a.videoID]=null;if(b){for(b=0;b<a.resources.length;b++)try{a.resources[b].downloader&&a.resources[b].downloader.abort()}catch(b){z.logEventTracking(a,i.DOWNLOAD_FAILED,c)}}}},getResourceCodec:function(a,b){var c,d,e;e=a.resources.length;for(d=0;d<e;d++){c=a.resources[d];if(c.type===b)return c.codec}return null},updateTracking:function(a,b,c){__p&&__p();var d,e;if(a.deleted)return;c&&(b.state=c);b.state===z.RESOURCE_STATE.finished&&(b.type===x.video?a.videoChunkCount=b.chunkCount:b.type===x.audio&&(a.audioChunkCount=b.chunkCount));if(b.state===z.RESOURCE_STATE.loading)a.resources.push(b);else{c=z.RESOURCE_STATE.finished;b=a.resources.length;for(d=0;d<b;d++){e=a.resources[d];if(e.state===z.RESOURCE_STATE.loading){c=z.RESOURCE_STATE.loading;break}else e.state===z.RESOURCE_STATE.error&&(c=z.RESOURCE_STATE.error)}if(c===z.RESOURCE_STATE.error)z.deleteTracking(a),z.deleteCachedVideoFromStorage(a.videoID,function(){z.onError(a)});else if(c===z.RESOURCE_STATE.finished)try{z.saveCachedVideo(a),z.deleteTracking(a),z.onDone(a)}catch(b){z.deleteCachedVideoFromStorage(a.videoID,function(){z.onError(a)})}}},trackProgress:function(a){var b=0;for(var c in a.resources)Object.prototype.hasOwnProperty.call(a.resources,c)&&(b+=a.resources[c].progress);a.loaded=b;var d={};d[j.BYTES_DOWNLOADED]=a.loaded;z.logEventTracking(a,i.DOWNLOAD_PROGRESS,d);return b},sendResourceRequest:function(a,b){__p&&__p();var c=new o(b.src,b.size);a.chunked?c.setChunkedResponseHandler(function(c){__p&&__p();try{var d=[];for(var e=0;e<c.length;e++){var f=[],g=z.createPrefix(a.videoID,b.type,e);f.push(g);g=c[e];f.push(g);d.push(f)}r.multiSet(d,function(d){b.chunkCount=c.length,z.updateTracking(a,b,d?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished)})}catch(c){z.updateTracking(a,b,z.RESOURCE_STATE.error)}}):c.setResponseHandler(function(c){try{var d=z.createPrefix(a.videoID,b.type);r.setItem(d,c,function(c){z.updateTracking(a,b,c?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished)})}catch(c){z.updateTracking(a,b,z.RESOURCE_STATE.error)}});c.setErrorHandler(function(){z.updateTracking(a,b,z.RESOURCE_STATE.error)});c.setProgressHandler(function(c){c.total&&(b.progress=c.loaded,a.onProgress(z.trackProgress(a),a.totalSize))});c.setAbortHandler(function(){setTimeout(function(){z.updateTracking(a,b,z.RESOURCE_STATE.error)},u)});z.updateTracking(a,b);b.downloader=c;c.sendRequest()},createLogger:function(a){var b={};b[j.DOWNLOAD_ORIGIN]=a.origin;b[j.QUALITY]=a.quality;b[j.SESSION_ID]=a.sessionID;b[j.TOTAL_SIZE]=a.totalSize;b[j.VIDEO_ID]=a.videoID;return new h(b)},getLogger:function(a){return!a.logger?null:a.logger},logEvent:function(a,event,b){var c=new h();b=b||{};b[j.VIDEO_ID]=a;a=z.getCachedVideoByID(a);a&&(b[j.DOWNLOAD_ORIGIN]=a.downloadOrigin,b[j.SESSION_ID]=a.sessionID,b[j.TOTAL_SIZE]=a.totalSize,b[j.QUALITY]=b[j.QUALITY]?b[j.QUALITY]:a.quality,b[j.SAVED_OFFLINE]=1);c.logEvent(event,b)},logEventTracking:function(a,event,b){var c=this.getLogger(a);b=b||{};Object.prototype.hasOwnProperty.call(b,j.REASON)||(b[j.REASON]=a.downloadReason);if(a.loggingDataCallback){var d=a.loggingDataCallback;b=d(b)}b[j.ELAPSED_TIME_MS]=Date.now()-a.downloadStartedTime;c.logEvent(event,b)},onError:function(a,b,c){var d={};d[j.ERROR_CODE]=b;d[j.ERROR]=c;z.logEventTracking(a,i.DOWNLOAD_FAILED,d);a.onError(b)},onDone:function(a){z.logEventTracking(a,i.DOWNLOAD_FINISHED),a.onDone()}};e.exports=z}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){__p&&__p();var g={size:"90%"};function h(a){__p&&__p();var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){__p&&__p();a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}function a(a){"use strict";this.$1=i(a),this.$1.sort(function(a,b){return a.counter-b.counter}),this.$2=this.$1.map(function(a,b){return b}).sort(function(a,b){return this.$1[a].begin-this.$1[b].begin}.bind(this)),this.invalidateCache(),this.$6=g}a.prototype.$7=function(a){"use strict";return this.$1[this.$2[a]]};a.prototype.$8=function(a){"use strict";var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};a.prototype.$9=function(a){"use strict";this.$4=this.$4.filter(function(b){return b.end>a})};a.prototype.invalidateCache=function(){"use strict";this.$5=0,this.$4=[],this.$3=0};a.prototype.setStyle=function(a){"use strict";this.$6=a};a.prototype.getSubtitles=function(a){"use strict";a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};a.prototype.renderVTT=function(){"use strict";return q(this.$1,this.$6)};e.exports=a}),null);
__d("MVideoSubtitles",["DOM","EventListener","SubRipText","XHRRequest","emptyFunction","fbt","getCrossOriginTransport"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n=a.URL||a.webkitURL;function b(a){"use strict";this.$1=a,this.$2=k}b.prototype.$3=function(a){"use strict";a=new i(a);a=new Blob([a.renderVTT()],{type:"text/vtt"});return n.createObjectURL(a)};b.prototype.loadSubtitles=function(a){"use strict";if(!n)return;new j(a).setTransportBuilder(m).setMethod("GET").setResponseHandler(function(a){this.$4(this.$3(a))}.bind(this)).send()};b.prototype.$4=function(a){"use strict";a=g.create("track",{label:l._("On"),kind:"captions",src:a});h.listen(a,"load",function(){this.$2()}.bind(this));g.appendContent(this.$1,a);this.hideSubtitles()};b.prototype.showSubtitles=function(){"use strict";Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="showing"})};b.prototype.hideSubtitles=function(){"use strict";Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};b.prototype.setOnSubtitlesReady=function(a){"use strict";this.$2=a};e.exports=b}),null);
__d("VideoViewabilityPercentage",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OFFSCREEN:-2,VIEWABLE_UNKNOWN:-1,VIEWABLE_0:0,VIEWABLE_25:25,VIEWABLE_50:50,VIEWABLE_75:75,VIEWABLE_100:100})}),null);
__d("MVideoViewability",["MFullScreen","VideoViewabilityPercentage","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k={shouldLog:function(a){return!!a&&a.videoViewabilityLoggingEnabled&&a.videoViewabilityLoggingPollingRate>0},calculateViewabilityPercentage:function(a){__p&&__p();if(g.isFullScreen())return h.VIEWABLE_100;if(!document.hasFocus())return h.OFFSCREEN;a=k.calculateViewabilityPercentageNumber(i(a));if(a===0)return h.OFFSCREEN;else if(a<25)return h.VIEWABLE_0;else if(a<50)return h.VIEWABLE_25;else if(a<75)return h.VIEWABLE_50;else if(a<100)return h.VIEWABLE_75;else return h.VIEWABLE_100},calculateViewabilityPercentageNumber:function(a){var b=j().width,c=j().height;if(a.width===0||a.height===0)return 0;var d=a.x,e=a.x+a.width,f=a.y,g=a.y+a.height;if(e<=0||d>=b||g<=0||f>=c)return 0;e=Math.min(e,b)-Math.max(d,0);b=Math.min(g,c)-Math.max(f,0);return e*b*100/(a.width*a.height)}};e.exports=k}),null);
__d("VideoPlayerLoggerEventField",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ABANDON_IN_STALL:"abandon_in_stall",ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",APPENDED_BYTE_SIZE:"appended_byte_size",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CLIENT_UNIX_TIME:"client_unix_time",CONNECTIVITY_SUBTYPE:"connectivity_subtype",CONNECTIVITY_TYPE:"connectivity_type",CREATOR_APP_ID:"creator_app_id",CURRENT_VIEWABILITY_PERCENTAGE:"current_viewability_percentage",VIEWABILITY_DEBUG_REASON:"viewability_debug_reason",CURRENT_VOLUME:"current_volume",DATA_CONNECTION_QUALITY:"data_connection_quality",DEBUG_REASON:"debug_reason",DEVICE_ID:"device_id",DURATION:"duration",ERROR:"error",ERROR_CODE:"error_code",ERROR_DESCRIPTION:"error_description",ERROR_DOMAIN:"error_domain",ERROR_USER_INFO:"error_user_info",EVENT_NAME:"name",EVENT_BATCH:"batch",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",FEED_AGGREGATION_TYPE:"feed_aggregation_type",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",FT:"ft",GKS:"gks",HAS_BEEN_LIVE:"has_been_live",HD:"hd",HEADSET_STATE:"headset_state",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_AUTO_ADVANCED:"is_auto_advanced",IS_DEEPLINK_USER:"is_deeplink_user",IS_FIRST_TIME_USER:"is_first_time_user",IS_FREE:"is_free",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",IS_LIVE_VIDEO_REWOUND:"is_live_video_rewound",IS_SHOW_VIDEO:"is_show_video",IS_STALLING:"is_stalling",IS_TEMPLATED_MANIFEST:"is_templated_manifest",LAST_VIEWABILITY_PERCENTAGE:"last_viewability_percentage",NEXT_REPRESENTATION_ID:"next_representation_id",ORIGINAL_VIDEO_ID:"original_video_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYBACK_DURATION:"playback_duration",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_STATE:"player_state",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",POSITION_IN_UNIT:"position_in_unit",PROJECTION:"projection",QES:"qes",REACTION_VIDEO_CHANNEL_ID:"video_channel_id",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",REACTION_VIDEO_CHANNEL_SUBTYPE:"reaction_video_channel_subtype",REASON:"reason",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",REFERRER:"referrer",REPRESENTATION_ID:"representation_id",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SESSION_START_TIME:"session_start_time",SHOW_VIDEO_TYPE:"show_video_type",SOURCE:"source",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",STALL_COUNT:"stall_count",STALL_INFO_JSON:"stall_info_json",STALL_TIME:"stall_time",STATE:"state",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SINCE_CREATION:"time_since_creation",TIME_SPENT_ID:"time_spent_id",TIME_UNTIL_INTERRUPT:"time_until_interrupt",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",UNIQUE_TIME_SPENT_MS:"unique_time_spent_ms",UNIT_POSITION:"unit_position",UPSTREAM_PLAYER_SOURCE:"upstream_player_source",USER_ASN:"user_asn",USER_ID:"user_id",V2_HEART_BEAT:"v2_heart_beat",VIDEO_BANDWIDTH:"video_bandwidth",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_CLIP_START_TIME_MS:"video_clip_start_time_ms",VIDEO_HOME_SESSION_ID:"video_home_session_id",VIDEO_ID:"video_id",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_PLAY_SUBREASON:"video_play_subreason",VIDEO_PLAYER_HEIGHT:"video_player_height",VIDEO_PLAYER_WIDTH:"video_player_width",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_BUFFER_END_POSITION:"video_buffer_end_position",VIDEO_TIME_RATIO:"video_time_ratio",VIEWABILITY_PERCENTAGE:"viewability_percentage",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id",AD_BREAK_VIEWER_SESSION_ID:"ad_break_viewer_session_id"})}),null);
__d("VideoPlayerReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTOPLAY:"autoplay_initiated",COMMERCIAL_BREAK:"commercial_break",CONNECTION:"host-connection-error",EMBEDDED_VIDEO_API:"embedded_video_api_initiated",FALLBACK_MODE:"fallback_mode",HOVER:"hover",LOOP:"loop_initiated",NETWORK_INTERRUPTED:"network_interrupted",NETWORK_RESUMED:"network_resumed",PAGE_VISIBILITY:"page_visibility_initiated",SEEK:"seek_initiated",SPHERICAL_FALLBACK:"spherical_fallback",SPHERICAL_SWITCH_CANVAS:"spherical_switch_canvas",SPHERICAL_FAILED:"spherical_failed",UNLOADED:"unloaded",USER:"user_initiated",VIDEO_DATA_REPLACED:"video_data_replaced",VIDEO_DATA_SWITCH:"video_data_switch",VIDEO_VISIBILITY:"video_visibility_initiated",VOD_NOT_READY:"vod_not_ready",WARNING_SCREEN_COVER:"warning_screen_cover"})}),null);
__d("VideoPlayerVersions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HTML5:"html5",PLEASANTVILLE:"pleasantville",REACT:"react",REACT_PLEASANTVILLE:"react_pleasantville",REACT_SILVERCITY:"react_silvercity",SILVERCITY:"silvercity",OLD_API_EXO:"old_api_exo",OLD_API_EXO_DEPRECATED:"old_api_exo_deprecated",OLD_API_EXO_NEW_LIB:"old_api_exo_new_lib",OLD_API_PSR:"old_api_psr",HEROPLAYER:"heroplayer",FNF:"fnf",LEGACY:"legacy",REFACTORED:"refactored",MBASIC:"mbasic",MTOUCH_SHAKA_LIVE:"mtouch_shaka_live",MTOUCH_SPHERICAL:"mtouch_360",MTOUCH_OZ:"mtouch_oz",CASTING_DEBUG:"casting_debug",CHROMECAST:"chromecast",WEBAPIS_AVPLAY:"webapis_avplay",FBLITE_LEGACY:"fblite_legacy",FBLITE_SURFACE:"fblite_surface",FBLITE_TEXTURE:"fblite_texture",HERO_SURFACE:"hero_surface",HERO_TEXTURE:"hero_texture",UNKNOWN:"unknown"})}),null);
__d("isCdnURI",["CdnAkamaiDomainsConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.getProtocol()!=="http"&&a.getProtocol()!=="https")return!1;var b=a.getPort();if(!!b&&b!==80&&b!==443)return!1;return a.isSubdomainOfDomain("fbcdn.net")?!0:g[a.getDomain()]!=undefined}e.exports=a}),null);
__d("MVideoPlayerApiBase",["Promise","Bootloader","clearInterval","CSS","DataAttributeUtils","DOM","EventListener","HVideoPlayerLoggerMixin","isCdnURI","MFullScreen","MInlineVideoDebugger","MLegacyDataStore","MParent","MVideoCache","MVideoExperiments","MVideoSubtitles","MVideoUtils","MVideoViewability","setTimeoutAcrossTransitions","setInterval","Stratcom","StratcomManager","SubscriptionsHandler","URI","VideoPlayerLoggerEvent","VideoPlayerLoggerEventField","VideoPlayerReason","VideoPlayerVersions","VideoViewabilityKeyEvents","mixin","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){__p&&__p();var L,M={PLAY:"play",PLAYING:"playing",PAUSE:"pause",ENDED:"ended",WAITING:"waiting",TIMEUPDATE:"timeupdate",SEEKED:"seeked",SEEKING:"seeking",VOLUMECHANGE:"volumechange",CANPLAY:"canplay",LOADEDMETADATA:"loadedmetadata"},N=["canplay","play","seeked","seeking"],O=100,P=1e3/15;b=babelHelpers.inherits(a,J(n));L=b&&b.prototype;function a(a,b,c){"use strict";__p&&__p();L.constructor.call(this);this.$MVideoPlayerApiBase3=G.USER;this.$MVideoPlayerApiBase6=!0;this.$MVideoPlayerApiBase7=!1;this.$MVideoPlayerApiBase8=!1;this.$MVideoPlayerApiBase9=!1;this.$MVideoPlayerApiBase11=null;this.$MVideoPlayerApiBase12=G.USER;this.$MVideoPlayerApiBase14=!1;this.$MVideoPlayerApiBase36=function(){A.invoke("m:video:player:fullscreenchange",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2})}.bind(this);this.$MVideoPlayerApiBase23=function(){this.logEvent(E.REQUESTED_PLAYING,null),this.$MVideoPlayerApiBase37(!0),A.invoke("m:video:player:play",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2}),this.toggleClassOnMVideoElement(w.SHOW_PAUSE_CLASS,!1),this.$MVideoPlayerApiBase38()}.bind(this);this.$MVideoPlayerApiBase24=function(){this.$MVideoPlayerApiBase10=M.PLAYING,A.invoke("m:video:player:playing",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2}),this.hideLoadingSpinner(),this.$MVideoPlayerApiBase39()}.bind(this);this.$MVideoPlayerApiBase25=function(a){this.$MVideoPlayerApiBase10=M.PAUSE,A.invoke("m:video:player:pause",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2,destroyed:a}),this.$MVideoPlayerApiBase37(!1),this.hideLoadingSpinner(),this.$MVideoPlayerApiBase40(),this.$MVideoPlayerApiBase41()}.bind(this);this.$MVideoPlayerApiBase26=function(){A.invoke("m:video:player:ended",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2}),this.$MVideoPlayerApiBase10=M.ENDED,this.$MVideoPlayerApiBase40(),this.$MVideoPlayerApiBase4.playOnClick&&this.$MVideoPlayerApiBase4.playInFullScreen&&p.isSupported()&&p.disableFullScreen()}.bind(this);this.$MVideoPlayerApiBase27=function(){this.showLoadingSpinner()}.bind(this);this.$MVideoPlayerApiBase29=function(){this.$MVideoPlayerApiBase10=M.SEEKED}.bind(this);this.$MVideoPlayerApiBase30=function(){this.$MVideoPlayerApiBase10=M.SEEKING,this.$MVideoPlayerApiBase8&&(this.$MVideoPlayerApiBase9=this.$MVideoPlayerApiBase8,this.$MVideoPlayerApiBase40(),this.logPauseEvent({lastPauseReason:G.SEEK}))}.bind(this);this.$MVideoPlayerApiBase31=function(){A.invoke("m:video:player:volumechange",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2})}.bind(this);this.$MVideoPlayerApiBase32=function(){this.hideLoadingSpinner()}.bind(this);this.$MVideoPlayerApiBase34=function(){!this.$MVideoPlayerApiBase7&&this.getLastActionReason()===G.PAGE_VISIBILITY&&this.play(G.USER)}.bind(this);this.$MVideoPlayerApiBase35=function(){this.$MVideoPlayerApiBase7&&this.pause(G.PAGE_VISIBILITY)}.bind(this);this.$MVideoPlayerApiBase28=function(){this.$MVideoPlayerApiBase9&&this.$MVideoPlayerApiBase10===M.SEEKED&&(this.$MVideoPlayerApiBase10=M.TIMEUPDATE,this.$MVideoPlayerApiBase43()),this.$MVideoPlayerApiBase17(),this.$MVideoPlayerApiBase18()}.bind(this);this.$MVideoPlayerApiBase33=function(){this.$MVideoPlayerApiBase4.playStartSec&&this.$MVideoPlayerApiBase4.playStartSec>0&&(this.$MVideoPlayerApiBase2.currentTime=this.$MVideoPlayerApiBase4.playStartSec)}.bind(this);this.$MVideoPlayerApiBase42=function(){var a=x.calculateViewabilityPercentage(this.$MVideoPlayerApiBase1);if(this.$MVideoPlayerApiBase15!==a){var b;this.logEvent(E.VIEWABILITY_CHANGED,(b={},b[F.CURRENT_VIEWABILITY_PERCENTAGE]=a,b));this.$MVideoPlayerApiBase15=a;this.$MVideoPlayerApiBase44()}}.bind(this);this.hideLoadingSpinner=function(){this.toggleClassOnMVideoElement(w.LOADING_CLASS,!1)}.bind(this);this.showLoadingSpinner=function(){this.toggleClassOnMVideoElement(w.LOADING_CLASS,!0)}.bind(this);this.toggleVideoQuality=function(){};this.getVideoQuality=function(){return this.$MVideoPlayerApiBase4.defaultQuality}.bind(this);this.$MVideoPlayerApiBase1=a;this.$MVideoPlayerApiBase2=b;c&&(this.$MVideoPlayerApiBase3=c);this.$MVideoPlayerApiBase4=r.get(this.$MVideoPlayerApiBase1);this.$MVideoPlayerApiBase5=new C();N.forEach(function(event){B.enableDispatch(this.$MVideoPlayerApiBase2,event)}.bind(this));this.$MVideoPlayerApiBase17=K.withBlocking(this.$MVideoPlayerApiBase20,P,this);this.$MVideoPlayerApiBase18=K.withBlocking(this.$MVideoPlayerApiBase21,P,this);this.initLogger();a=s.bySigil(this.$MVideoPlayerApiBase1,"story-div");if(a){b=k.getDataFt(a);c={ft:JSON.parse(b)};this.getLogger().setFTData(c)}this.$MVideoPlayerApiBase22();this.$MVideoPlayerApiBase4.videoDebuggerEnabled&&(this.$MVideoPlayerApiBase11=new q(this.$MVideoPlayerApiBase1,this.$MVideoPlayerApiBase4),this.$MVideoPlayerApiBase11.updateLastActionReasonDebugger(this.getLastActionReason()));this.$MVideoPlayerApiBase14=x.shouldLog(this.$MVideoPlayerApiBase4);this.postInit()}a.prototype.postInit=function(){"use strict"};a.prototype.$MVideoPlayerApiBase22=function(){"use strict";this.$MVideoPlayerApiBase5.addSubscriptions(A.listen("m:page:unload",null,function(){this.release(),A.removeCurrentListener()}.bind(this))),this.$MVideoPlayerApiBase5.addSubscriptions(m.listen(this.getVideoElement(),M.PLAY,this.$MVideoPlayerApiBase23),m.listen(this.getVideoElement(),M.PLAYING,this.$MVideoPlayerApiBase24),m.listen(this.getVideoElement(),M.PAUSE,this.$MVideoPlayerApiBase25),m.listen(this.getVideoElement(),M.ENDED,this.$MVideoPlayerApiBase26),m.listen(this.getVideoElement(),M.WAITING,this.$MVideoPlayerApiBase27),m.listen(this.getVideoElement(),M.TIMEUPDATE,this.$MVideoPlayerApiBase28),m.listen(this.getVideoElement(),M.SEEKED,this.$MVideoPlayerApiBase29),m.listen(this.getVideoElement(),M.SEEKING,this.$MVideoPlayerApiBase30),m.listen(this.getVideoElement(),M.VOLUMECHANGE,this.$MVideoPlayerApiBase31),m.listen(this.getVideoElement(),M.CANPLAY,this.$MVideoPlayerApiBase32),m.listen(this.getVideoElement(),M.LOADEDMETADATA,this.$MVideoPlayerApiBase33)),this.$MVideoPlayerApiBase4.videoPlayerPauseWhenBlur&&this.$MVideoPlayerApiBase5.addSubscriptions(m.listen(window,"focus",this.$MVideoPlayerApiBase34),m.listen(window,"blur",this.$MVideoPlayerApiBase35)),u.mtouch_ref_move_fullscreen&&(p.isSupported()&&this.$MVideoPlayerApiBase5.addSubscriptions(p.listenForFullScreenEvent(window,this.$MVideoPlayerApiBase36)))};a.prototype.$MVideoPlayerApiBase38=function(){"use strict";this.$MVideoPlayerApiBase14&&(this.$MVideoPlayerApiBase16=z(this.$MVideoPlayerApiBase42,this.$MVideoPlayerApiBase4.videoViewabilityLoggingPollingRate))};a.prototype.$MVideoPlayerApiBase41=function(){"use strict";i(this.$MVideoPlayerApiBase16)};a.prototype.$MVideoPlayerApiBase43=function(){"use strict";this.logEvent(E.REQUESTED_PLAYING,{debug_reason:G.SEEK}),this.onPlaying(),this.$MVideoPlayerApiBase39(),this.$MVideoPlayerApiBase9=!1};a.prototype.$MVideoPlayerApiBase39=function(){"use strict";this.$MVideoPlayerApiBase8=!0};a.prototype.$MVideoPlayerApiBase40=function(){"use strict";this.$MVideoPlayerApiBase8=!1};a.prototype.$MVideoPlayerApiBase44=function(){"use strict";this.$MVideoPlayerApiBase11&&this.$MVideoPlayerApiBase11.updateViewabilityLoggingDebugger(this.$MVideoPlayerApiBase15)};a.prototype.$MVideoPlayerApiBase20=function(){"use strict";this.$MVideoPlayerApiBase4.playEndSec&&this.$MVideoPlayerApiBase2.currentTime>this.$MVideoPlayerApiBase4.playEndSec&&!this.$MVideoPlayerApiBase4.loop&&this.pause()};a.prototype.$MVideoPlayerApiBase21=function(){"use strict";if(this.$MVideoPlayerApiBase4.loop&&(this.$MVideoPlayerApiBase4.playStartSec||this.$MVideoPlayerApiBase4.playEndSec)&&(this.$MVideoPlayerApiBase4.playEndSec&&this.$MVideoPlayerApiBase2.currentTime>this.$MVideoPlayerApiBase4.playEndSec||this.$MVideoPlayerApiBase4.playStartSec&&this.$MVideoPlayerApiBase2.currentTime==0)){var a=this.$MVideoPlayerApiBase4.playStartSec||0;this.$MVideoPlayerApiBase2.currentTime=a}};a.prototype.isVisible=function(){"use strict";return this.$MVideoPlayerApiBase6};a.prototype.show=function(){var a=arguments.length<=0||arguments[0]===undefined?!0:arguments[0];this.$MVideoPlayerApiBase6=!0;j.conditionClass(this.$MVideoPlayerApiBase1,w.SHOWN_CLASS,!0);this.$MVideoPlayerApiBase45();a&&this.$MVideoPlayerApiBase46()};a.prototype.hide=function(){"use strict";this.$MVideoPlayerApiBase6=!1,j.conditionClass(this.$MVideoPlayerApiBase1,w.SHOWN_CLASS,!1)};a.prototype.play=function(a){"use strict";a&&this.setLastActionReason(a),this.$MVideoPlayerApiBase37(!0),u.isKaiOS?this.$MVideoPlayerApiBase2.play():(this.$MVideoPlayerApiBase13&&clearTimeout(this.$MVideoPlayerApiBase13),this.$MVideoPlayerApiBase13=y(function(){this.$MVideoPlayerApiBase13=null,this.$MVideoPlayerApiBase2.play()}.bind(this),O))};a.prototype.pause=function(a){"use strict";a&&this.setLastActionReason(a),this.$MVideoPlayerApiBase37(!1),this.$MVideoPlayerApiBase2.pause(),this.$MVideoPlayerApiBase13&&(clearTimeout(this.$MVideoPlayerApiBase13),this.$MVideoPlayerApiBase13=null),this.toggleClassOnMVideoElement(w.SHOW_PAUSE_CLASS,!0)};a.prototype.destroy=function(){"use strict";__p&&__p();this.$MVideoPlayerApiBase25(!0);u.logPauseBeforeDestroyingPlayer&&this.logPauseEvent();this.$MVideoPlayerApiBase47();this.pause(G.UNLOADED);A.invoke("m:video:player:destroy",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.$MVideoPlayerApiBase2});var a=this.$MVideoPlayerApiBase2;this.$MVideoPlayerApiBase2=null;this.$MVideoPlayerApiBase11&&(this.$MVideoPlayerApiBase11.cleanUp(),this.$MVideoPlayerApiBase11=null);this.$MVideoPlayerApiBase19&&(this.$MVideoPlayerApiBase19.unload(),this.$MVideoPlayerApiBase19=null);this.release();this.hide();u.enablePlayerStateCleanup&&a&&(a.setAttribute("src",""),a.load&&a.load());a=null};a.prototype.$MVideoPlayerApiBase47=function(){"use strict";l.remove(this.$MVideoPlayerApiBase2);while(this.$MVideoPlayerApiBase2.hasChildNodes())this.$MVideoPlayerApiBase2.removeChild(this.$MVideoPlayerApiBase2.lastChild);this.$MVideoPlayerApiBase2.removeAttribute("src")};a.prototype.release=function(){"use strict";this.$MVideoPlayerApiBase5.release(),i(this.$MVideoPlayerApiBase16)};a.prototype.$MVideoPlayerApiBase45=function(){"use strict";this.$MVideoPlayerApiBase4.width&&this.$MVideoPlayerApiBase2.setAttribute("width",this.$MVideoPlayerApiBase4.width),this.$MVideoPlayerApiBase4.height&&this.$MVideoPlayerApiBase2.setAttribute("height",this.$MVideoPlayerApiBase4.height)};a.prototype.$MVideoPlayerApiBase46=function(){"use strict";if(!o(new D(this.$MVideoPlayerApiBase4.subtitlesSrc)))return;var a=new v(this.$MVideoPlayerApiBase2);a.setOnSubtitlesReady(function(){return a.showSubtitles()});a.loadSubtitles(this.$MVideoPlayerApiBase4.subtitlesSrc)};a.prototype.toggleClassOnMVideoElement=function(a,b){"use strict";j.conditionClass(this.$MVideoPlayerApiBase1,a,b)};a.prototype.hasActivePlayer=function(){"use strict";return this.$MVideoPlayerApiBase6&&this.$MVideoPlayerApiBase2.parentNode===this.$MVideoPlayerApiBase1};a.prototype.getVideoData=function(){"use strict";return this.$MVideoPlayerApiBase4};a.prototype.getMVideoElement=function(){"use strict";return this.$MVideoPlayerApiBase1};a.prototype.$MVideoPlayerApiBase37=function(a){"use strict";this.$MVideoPlayerApiBase7=a,this.$MVideoPlayerApiBase11&&this.$MVideoPlayerApiBase11.updatePlayerStateDebugger(this.$MVideoPlayerApiBase7?w.PLAYER_STATE.playing:w.PLAYER_STATE.paused)};a.prototype.isPlayScheduled=function(){"use strict";return this.$MVideoPlayerApiBase7};a.prototype.setPlayerState=function(a){"use strict";this.$MVideoPlayerApiBase37(a===w.PLAYER_STATE.playing)};a.prototype.setLastActionReason=function(a){"use strict";this.$MVideoPlayerApiBase12=a,this.$MVideoPlayerApiBase11&&this.$MVideoPlayerApiBase11.updateLastActionReasonDebugger(a)};a.prototype.getLastActionReason=function(){"use strict";return this.$MVideoPlayerApiBase12};a.prototype.getPlayerFormat=function(){"use strict";return this.$MVideoPlayerApiBase4.playerFormat};a.prototype.getPlayerOrigin=function(){"use strict";return this.$MVideoPlayerApiBase4.playerOrigin};a.prototype.getPlayerSuborigin=function(){"use strict";return this.$MVideoPlayerApiBase4.playerSuborigin};a.prototype.getSubscriptions=function(){"use strict";return this.$MVideoPlayerApiBase5};a.prototype.getVideoElement=function(){"use strict";return this.$MVideoPlayerApiBase2};a.prototype.getVideoID=function(){"use strict";return this.$MVideoPlayerApiBase4.videoID};a.prototype.getSavedOffline=function(){"use strict";return t.isVideoDownloaded(this.$MVideoPlayerApiBase4.videoID)};a.prototype.getConnectivityType=function(){"use strict";return w.getConnectivityType()};a.prototype.getLastPlayReason=function(){"use strict";return this.getLastActionReason()};a.prototype.getVideoPlayReason=function(){"use strict";return this.$MVideoPlayerApiBase3};a.prototype.getResourceUrl=function(){"use strict";return u.shouldLogResourceUrl?this.$MVideoPlayerApiBase4.src:null};a.prototype.getExternalLogIDAndType=function(){"use strict";var a=this.$MVideoPlayerApiBase4[F.EXTERNAL_LOG_ID],b=this.$MVideoPlayerApiBase4[F.EXTERNAL_LOG_TYPE];a={externalLogID:a,externalLogType:b};return a};a.prototype.getAdditionalLogData=function(a){"use strict";var b={video_quality:this.getVideoQuality(),player_version:this.getPlayerVersion()};if(u.mtouch_send_video_play_reason){var c=this.$MVideoPlayerApiBase3;c&&a!==E.DISPLAYED&&(b.video_play_reason=c)}return b};a.prototype.getPlayerVersion=function(){"use strict";return H.HTML5};a.prototype.addVideoViewabilityToKeyEvents=function(event,a){"use strict";var b=x.calculateViewabilityPercentage(this.$MVideoPlayerApiBase2);this.$MVideoPlayerApiBase15=b;this.$MVideoPlayerApiBase44();if(I.Events.includes(event)&&x.shouldLog(this.$MVideoPlayerApiBase4)){var c;return babelHelpers["extends"]({},a,(c={},c[F.CURRENT_VIEWABILITY_PERCENTAGE]=b,c))}return a};a.prototype.getEmbeddedVideoControlsConfig=function(){"use strict";return null};a.prototype.getEmbeddedVideoControls=function(){"use strict";return this.$MVideoPlayerApiBase19};a.prototype.setupControls=function(){"use strict";var a=this.getEmbeddedVideoControlsConfig();return!a?g.resolve():new g(function(b){var c={toggleQuality:this.toggleVideoQuality,getCurrentVideoQuality:this.getVideoQuality};this.$MVideoPlayerApiBase5.addSubscriptions(h.loadModules(["MEmbeddedVideoControls"],function(d){this.$MVideoPlayerApiBase19=new d(this,this.getVideoElement(),this.getMVideoElement(),c,a),b()}.bind(this),"MVideoPlayerApiBase"))}.bind(this))};e.exports={MVideoPlayerApiBase:a}}),null);
__d("MProgressiveVideoPlayerApi",["MVideoPlayerApiBase","VideoPlayerVersions"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j;b=g.MVideoPlayerApiBase;i=babelHelpers.inherits(a,b);j=i&&i.prototype;a.prototype.postInit=function(){"use strict";j.postInit.call(this),this.getVideoElement().load()};a.prototype.getAdditionalLogData=function(a){"use strict";a=j.getAdditionalLogData.call(this,a);var b={},c=this.getVideoData().playbackIsLiveStreaming;c&&(b.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return Object.assign({},a,b)};a.prototype.getPlayerVersion=function(){"use strict";return h.HTML5};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("MShakaVideoPlayerApi",["MVideoPlayerApiBase","VideoPlayerVersions","promiseDone","requireWeak"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;b=g.MVideoPlayerApiBase;k=babelHelpers.inherits(a,b);l=k&&k.prototype;a.prototype.getAdditionalLogData=function(a){"use strict";a=l.getAdditionalLogData.call(this,a);var b={},c=this.getVideoData().playbackIsLiveStreaming;c&&(b.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return Object.assign({},a,b)};a.prototype.postInit=function(){"use strict";j("Shaka2",function(a){a=new a.Player(this.getVideoElement());this.getVideoElement().controls=!1;var b=a.getConfiguration();b.streaming.jumpLargeGaps=!0;a.configure(b);a.load(this.getVideoData().src)}.bind(this)),i(this.setupControls())};a.prototype.getEmbeddedVideoControlsConfig=function(){"use strict";return{playbackControlHidden:!1,scrubberHidden:!0,playbackTimerHidden:!0,fullScreenControlHidden:!1}};a.prototype.getPlayerVersion=function(){"use strict";return h.MTOUCH_SHAKA_LIVE};function a(){"use strict";k.apply(this,arguments)}e.exports=a}),null);
__d("MVideoDownloadState",[],(function(a,b,c,d,e,f){a={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DELETING:"deleting",NOTDOWNLOADED:"notdownloaded"};e.exports=a}),null);
__d("MVideoDownloadStateHandler",["MVideoDownloadState","MVideoCache"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null;function j(){"use strict";this.$1={},this.$2={}}j.prototype.addListener=function(a,b){"use strict";this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b)};j.removeListeners=function(a){"use strict";this.$3().$1[a]&&(this.$3().$1[a]=[])};j.prototype.setState=function(a,b){"use strict";a.forEach(function(a){this.$2[a]=b;if(!this.$1[a])return;a=this.$1[a];a.forEach(function(a){try{a.call(window,b)}catch(a){}})},this)};j.prototype.getState=function(a){"use strict";return this.$2[a]};j.$3=function(){"use strict";i||(i=new j());return i};j.listen=function(a,b){"use strict";this.$3().addListener(a,b),this.initializeState(a)};j.initializeState=function(a){"use strict";h.isVideoDownloaded(a)?j.downloaded([a]):h.isVideoDownloading(a)?j.downloading([a],h.getVideoProgressByID(a),h.getVideoSize(a)):j.deleted([a])};j.getState=function(a){"use strict";return this.$3().getState(a)};j.downloading=function(a,b,c){"use strict";this.$3().setState(a,{state:g.DOWNLOADING,loaded:b,total:c})};j.downloaded=function(a){"use strict";this.$3().setState(a,{state:g.DOWNLOADED})};j.cleanup=function(a){"use strict";this.$3().setState(a,{state:g.DELETING})};j.deleted=function(a,b){"use strict";this.$3().setState(a,{state:g.NOTDOWNLOADED,errorMessage:b})};e.exports=j}),null);
__d("XVideoCacheCleanUpController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:!0}})}),null);
__d("MVideoCacheCleanUp",["MVideoCache","MVideoCacheConfig","MVideoDownloadStateHandler","MRequest","XVideoCacheCleanUpController","MVideoDownloadConfig","setTimeoutAcrossTransitions","VideoDownloadReason","VideoDownloadDeleteReason"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=1e4,q=null,r={clean:function(){__p&&__p();r.deleteExpiredVideos();q=null;var a=g.getCachedVideoIDs(!0);if(a.length==0){r.setLastCleanUpDate();return}a=k.getURIBuilder().setStringVector("video_ids",a).getURI();a=new j(a);a.setMethod("POST");a.listen("done",function(a){a=a.payload||{};if(!a.error){r.setLastCleanUpDate();a=[].concat(a.offlineDisabled,a.unaccessible,a.unsaved);a.length>0&&r.deleteVideosByID(a)}});a.send()},deleteExpiredVideos:function(){var a=g.getCachedVideosMetadata([g.DOWNLOAD_STARTED_TIME,g.DOWNLOAD_REASON,g.OFFLINE_LIFESPAN]),b=[],c=Date.now(),d=c-l.cache_auto_downloaded_videos_caching_interval_ms;for(var e in a){var f=a[e];(f.downloadReason===n.AUTO_INITIATED&&f.downloadStartedTime<d||f.downloadStartedTime<c-f.offlineLifespan)&&b.push(e)}b.length>0&&r.deleteVideosByID(b)},deleteVideosByID:function(a){g.deleteVideosByID(a,function(a){i.deleted([a])},o.CACHE_SYNC)},requestCleanUp:function(){if(h.isSupported()&&g.isSupported()){var a=r.getLastCleanUpDate(),b=Date.now()-l.cache_sync_interval_ms;a=a<b;a&&!q&&(q=m(function(){g.makeLocalAsyncStorageConsistent(r.clean,function(a){i.deleted([a])})},p))}},getLastCleanUpDate:function(){if(h.isSupported())return h.getItemFromConfig(h.KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function(){if(h.isSupported()){var a=Date.now();h.setItemFromConfig(h.KEYS.lastCleanUp,a)}},checkAccess:function(a){a=a.downloadStartedTime;var b=r.getLastCleanUpDate();a=Math.max(a,b);b=Date.now();r.requestCleanUp();a=a+l.allowed_offline_access_interval_ms;a=a>b;return a}};e.exports=r}),null);
__d("MVideoMediaSourceState",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$2=!1,this.$1=!1,this.$3=a}a.prototype.getMediaSource=function(){"use strict";return this.$3};a.prototype.videoStreamEnded=function(){"use strict";this.$2=!0,this.$4()};a.prototype.audioStreamEnded=function(){"use strict";this.$1=!0,this.$4()};a.prototype.$4=function(){"use strict";this.$1&&this.$2&&this.$3.endOfStream()};e.exports=a}),null);
__d("MVideoPlayerVisibilityBehavior",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_VISIBILITY:"0",PAUSE_IF_MUTED:"1",PAUSE:"2"})}),null);
__d("showVideoUnavailableDialog",["MCustomDialog","fbt"],(function(a,b,c,d,e,f,g,h){function a(){var a=h._("Videos no longer available"),b=h._("Please connect to the Internet and try again."),c=h._("OK");g.show({titleString:a,descriptionString:b,dismissButtonString:c})}e.exports=a}),null);
__d("MInlineVideo",["BanzaiODS","DOM","MFullScreen","MLegacyDataStore","MOzVideoPlayerApi","MProgressiveVideoPlayerApi","MShakaVideoPlayerApi","MSphericalVideoPlayerApi","MStopNGo","MVideoCache","MVideoCacheCleanUp","MVideoDownloadConfig","MVideoExperiments","MVideoMediaSourceState","MVideoPlayerVisibilityBehavior","MVideoUtils","MViewport","Stratcom","SubscriptionsHandler","VideoPlayerReason","emptyFunction","getElementPosition","isNodeWithinRect","showVideoUnavailableDialog","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){__p&&__p();var F,G,H=!1,I=null,J,K=null,L;function a(){if(H)return;x.listen("click",v.PLAY_SIGIL,W);x.listen("m:page:unload",null,O);x.listen(["m:jewel:flyout:open","m:popup:show","m:side-area:show"],null,P);H=!0}function M(){F&&I&&I.isVisible()&&I.getVideoData().playInFullScreen==="true"&&!i.isFullScreen()&&(O(),i.removeFullScreenEventListeners(window,M))}function N(){var a=j.get(G),b=a.effectiveSrc;a=a.type;Array.isArray(b)&&(a!=="video"||b.length===1)&&(b=b[0]);a==="video"&&Array.isArray(b)?b.forEach(function(a){F.appendChild(h.create("source",a))}):b&&F.setAttribute("src",b);a==="video"&&F.load()}function O(){if(!I)return;I.destroy();I=null;G=null;L&&(L&&L.release(),L=null);J&&(J.release(),J=null)}function P(){if(!F||!I||!I.hasActivePlayer())return;j.get(G).type!=="video"?O():F&&(I.pause(z.PAGE_VISIBILITY),I.hide())}function Q(){return I?I.getLastActionReason():z.USER}function R(a){var b=j.get(G),c=b.type,d=document.getElementById(v.PLAYER_ID[c]),e=s.enableSphericalVideo&&b.spherical,f=s.msite_video_full_width;d||(d=v.createNodeFromTag(c,e||b.disableVideoControls,a,f));d.addEventListener&&d.addEventListener("contextmenu",function(a){a.preventDefault()},!1);return d}function b(){return G}function S(a){I&&I.pause(a)}function T(a){I&&I.play(a)}function c(a){I&&I.setLastActionReason(a)}function U(a,b){__p&&__p();var c=null,d=null;b.videoCodec?(c=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+b.videoCodec+'"'),c.addEventListener("updateend",function(){a.videoStreamEnded()},!1)):a.videoStreamEnded();b.audioCodec?(d=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+b.audioCodec+'"'),d.addEventListener("updateend",function(){a.audioStreamEnded()},!1)):a.audioStreamEnded();b.videoCodec&&p.getCachedVideoStream(b,function(a){var b=new FileReader();b.addEventListener("loadend",function(){c.appendBuffer(b.result)});b.readAsArrayBuffer(a)},A);b.audioCodec&&p.getCachedAudioStream(b,function(a){var b=new FileReader();b.addEventListener("loadend",function(){d.appendBuffer(b.result)});b.readAsArrayBuffer(a)},A)}function V(a,b){__p&&__p();var c=null,d=null,e=null,f=null,g=function(a,b,c){b.getNextBuffer(function(b){if(b){var d=new FileReader();d.addEventListener("loadend",function(){a.appendBuffer(d.result)});d.readAsArrayBuffer(b)}else c()})};b.videoCodec?(e=p.getCachedVideoStreamObject(b),c=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+b.videoCodec+'"'),c.addEventListener("updateend",function(){g(c,e,function(){a.videoStreamEnded()})},!1)):a.videoStreamEnded();b.audioCodec?(f=p.getCachedAudioStreamObject(b),d=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+b.audioCodec+'"'),d.addEventListener("updateend",function(){g(d,f,function(){a.audioStreamEnded()})},!1)):a.audioStreamEnded();b.videoCodec&&g(c,e,function(){a.videoStreamEnded()});b.audioCodec&&g(d,f,function(){a.audioStreamEnded()})}function W(a,b,c,d,e){X(a,b,c,d,e)}function X(a,b,c,d,e){__p&&__p();b||(b=a.getNode(v.INSERTION_POINT_SIGIL));e&&g.bumpEntityKey("minlinevideo","hasPreparedPlayer");d=d||z.USER;var f=j.get(b),h=p.isVideoDownloading(f.videoID);if(h)return;if(I&&I.getMVideoElement()===b&&I.isVisible())return;a&&a.prevent();f.effectiveSrc=f.src;var i=p.isSupported()&&f.canUseOffline&&p.getCachedVideoByID(f.videoID);if(i){h=i&&q.checkAccess(i);p.logPlaybackRequest(f.videoID,h,d);if(!h){D();return}else{var k=new t(new MediaSource());k.getMediaSource().addEventListener("sourceopen",function(){r.cache_chunked_playback_enabled?V(k,i):U(k,i)},!1);f.effectiveSrc=window.URL.createObjectURL(k.getMediaSource())}}f.muted=f.playMuted!=null?f.playMuted:!!c;Y(a,b,f,d,e)}function Y(a,b,c,d,e){__p&&__p();if(!I||I.getMVideoElement()!==b){x.invoke("m:video:player:prepare",null,{videoElement:b,player:F});O();var f=Z(c);G=b;F=R(e);F!==e&&(v.setAttributes(F,c),f!==k&&N(),e&&(e.setAttribute("src",""),e.load&&e.load()));I=new f(G,F,d);h.prependContent(G,F)}I.show();c.playOnClick&&c.type==="video"&&(I.play(d),c.playInFullScreen&&i.isSupported()&&(i.listenForFullScreenEvent(window,M),c.useShaka?(i.enableFullScreen(G),screen&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape")):i.enableFullScreen(F)));I.showLoadingSpinner();$(G,c,F);a&&v.handleLoggingOnPlay(a,I,c)}function Z(a){__p&&__p();if(a.useShaka)return m;else if(s.enableSphericalVideo&&a.spherical)return n;else if(s.mtouch_use_oz_player)if(!a.dashManifest)g.bumpEntityKey("MOzVideoPlayerApi","fallback.noDashManifest");else if(!window.MediaSource)g.bumpEntityKey("MOzVideoPlayerApi","fallback.noMediaSourceSupport");else if(!window.fetch)g.bumpEntityKey("MOzVideoPlayerApi","fallback.noFetch");else if(!window.ReadableStream)g.bumpEntityKey("MOzVideoPlayerApi","fallback.noReadableStream");else{g.bumpEntityKey("MOzVideoPlayerApi","setup");return k}return l}function $(a,b,c){var d=500;b.videoScrollUseLowThrottleRate&&(d=200);J||(J=new y());b.videoPlayerVisibilityBehavior&&b.videoPlayerVisibilityBehavior!==u.IGNORE_VISIBILITY&&J.addSubscriptions(x.listen("scroll",null,E(function(){return aa(a,b,c)},d)));s.mtouch_ref_move_fullscreen||i.isSupported()&&(K&&i.removeFullScreenEventListeners(window,K),K=function(){x.invoke("m:video:player:fullscreenchange",null,{videoElement:a,player:F})},i.listenForFullScreenEvent(window,K));b.animatedGifVideo&&!L&&(g.bumpEntityKey("minlinevideo","animatedGifVideo"),L=new y(),L.addSubscriptions(o.listen("go",ca)));(b.animatedGifVideo||b.loop)&&F.setAttribute("loop",!0)}function aa(a,b,c){if(!I)return;a=i.isFullScreen()||v.isVisible(B(a));!a&&I.isPlayScheduled()&&(b.videoPlayerVisibilityBehavior===u.PAUSE&&Q()!==z.AUTOPLAY||b.videoPlayerVisibilityBehavior===u.PAUSE_IF_MUTED&&(c.muted||c.volume===0))?S(z.VIDEO_VISIBILITY):a&&!I.isPlayScheduled()&&Q()===z.VIDEO_VISIBILITY&&T(z.VIDEO_VISIBILITY)}function ba(){var a=w.getHeight(),b=w.getWidth(),c=w.getBoundingRect();return{bottom:a,height:a,left:c.left,top:0,right:c.left+b,width:b}}function ca(){if(!I)return;var a=ba();a=C(G,a);a&&!I.isPlayScheduled()?(I.play(z.PAGE_VISIBILITY),F.setAttribute("loop",!0)):!a&&I.isPlayScheduled()&&(I.pause(z.PAGE_VISIBILITY),F.setAttribute("loop",!1))}function d(){return I?I.isPlayScheduled()?v.PLAYER_STATE.playing:v.PLAYER_STATE.paused:v.PLAYER_STATE.paused}f.getLastActionReason=Q;f.getPlayerState=d;f.getPlayerDOMVideoElement=b;f.pause=S;f.play=T;f.removePlayer=O;f.setLastActionReason=c;f.setupListeners=a;f.showPlayer=X}),null);
__d("MVideoPlaybackState",[],(function(a,b,c,d,e,f){a={NORMAL_PLAYBACK:"normalplayback",SLOW_PLAYBACK:"slowplayback",NOT_STARTED_PLAYBACK:"notstartedplayback"};e.exports=a}),null);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.wasVisible=!1,b}a.prototype.isVisible=function(){"use strict";throw new Error("Should be overridden")};a.prototype.getDistanceToViewport=function(){"use strict";throw new Error("Should be overridden")};a.prototype.playWithoutUnmute=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.prepareForPlay=function(){"use strict";throw new Error("Should be overridden")};a.prototype.pause=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.isAutoplayable=function(){"use strict";throw new Error("Should be overridden")};a.prototype.getDOMPosition=function(){"use strict";throw new Error("Should be overridden")};a.prototype.isLooping=function(){"use strict";throw new Error("Should be overridden")};a.prototype.isState=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.setLastActionReason=function(a){"use strict";throw new Error("Should be overridden")};e.exports=a}),null);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("MVideoPrefetcher",["Promise","MVideoAutoplayConfig","Run"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k=500;function l(){"use strict";this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}l.prototype.$7=function(a,b,c){"use strict";c.lastProgressValue*1e3>h.autoplay_prefetch_duration_threshold_ms||c.video.duration&&c.lastProgressValue>.9*c.video.duration?(clearInterval(c.watchdog),this.$8(c),this.$2.set(c.url,!0),a()):(clearInterval(c.watchdog),this.$8(c),b(new Error("Insufficient data received for a video preload")))};l.prototype.$9=function(a){"use strict";__p&&__p();var b=document.createElement("video");b.setAttribute("src",a);b.setAttribute("preload","auto");var c={};c.video=b;c.lastProgressTime=Date.now();c.lastProgressValue=0;c.url=a;var d=new g(function(a,d){c.watchdog=setInterval(function(){var b=Date.now();b>c.lastProgressTime+h.autoplay_prefetch_waiting_time_ms&&this.$7(a,d,c)}.bind(this),k),b.addEventListener("progress",function(){var a=b.buffered&&b.buffered.end&&b.buffered.length>0?b.buffered.end(0):0;a>c.lastProgressValue&&(c.lastProgressValue=a,c.lastProgressTimestamp=Date.now())})}.bind(this));this.$10(a,d);this.$3.push(c);b.load();return d};l.prototype.$11=function(a){"use strict";var b=[];for(var c=0;c<a.length;c++){var d=l.createQueryStringURL(a[c]);this.$1.has(d)||b.push(this.$9(d))}return b};l.prototype.$12=function(a){"use strict";this.$5++;a=this.$11(a.video);g.all(a).then(function(){this.$13()}.bind(this))["catch"](function(){return this.$13()}.bind(this))};l.prototype.$10=function(a,b){"use strict";__p&&__p();var c=!!this.$1.values().next().done;c&&i.onLeave(function(){for(var a=0;a<this.$3.length;a++)this.$14(this.$3[a]);this.$3=[];this.$4=[];this.$5=0;this.$1.clear()}.bind(this));this.$1.set(a,b)};l.prototype.$14=function(a){"use strict";a=a.video;a.setAttribute("src","");a.load&&a.load()};l.prototype.$8=function(a){"use strict";this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};l.prototype.$13=function(){"use strict";this.$5--;var a=this.$4.shift();a&&this.$12(a)};l.prototype.getAndDelete=function(a){"use strict";var b=this.$1.get(a);this.$1["delete"](a);return b};l.prototype.getPreloadCache=function(a){"use strict";return this.$2.get(a)};l.prototype.queueRequestBatch=function(a){"use strict";this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};l.getInstance=function(){"use strict";j===null&&(j=new l());return j};l.createQueryStringURL=function(a){"use strict";return a.url};l.loadVideo=function(a){"use strict";var b=l.getInstance();b.queueRequestBatch({video:[{url:a}]})};l.isVideoPreloaded=function(a){"use strict";return!!l.getInstance().getPreloadCache(a)};e.exports=l}),null);
__d("MVideoPreparer",["MVideoUtils","Run"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null;function j(){"use strict";this.$1=null,this.$2=null}j.prototype.cleanupPreparedVideo=function(){"use strict";if(this.$2){var a=this.$2;a.setAttribute("src","");a.load()}this.$2=null;this.$1=null};j.prototype.prepare=function(a,b){"use strict";__p&&__p();this.$1||h.onLeave(function(){this.cleanupPreparedVideo()}.bind(this));if(a!==this.$1){this.cleanupPreparedVideo();var c=g.createNodeFromTag("video");g.setAttributes(c,b);c.setAttribute("src",a);c.muted=!0;c.setAttribute("preload","auto");c.load();this.$1=a;this.$2=c}};j.prototype.getVideo=function(a){"use strict";var b=null;this.$1===a&&(b=this.$2,this.$1=null,this.$2=null);return b};j.getInstance=function(){"use strict";i===null&&(i=new j());return i};j.prepareVideo=function(a,b){"use strict";var c=j.getInstance();c.prepare(a,b)};j.getPreparedVideo=function(a){"use strict";var b=j.getInstance();return b.getVideo(a)};e.exports=j}),null);
__d("MVideoPlayerController",["MLegacyDataStore","destroyOnUnload","EventEmitter","getElementPosition","MInlineVideo","MVideoPrefetcher","MVideoPreparer","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o,p="MVideoPlayerController_instance",q=null,r=null;a=babelHelpers.inherits(s,i);o=a&&a.prototype;function s(a,b){"use strict";o.constructor.call(this),this.$MVideoPlayerController2=b.video_ids,this.$MVideoPlayerController3=a.video_element,this.$MVideoPlayerController1=a.root_element,this.$MVideoPlayerController4="ready",this.$MVideoPlayerController6(this.$MVideoPlayerController3),this.$MVideoPlayerController5=null,s.$MVideoPlayerController7()}s.prototype.isFullscreen=function(){"use strict";return!1};s.prototype.getVideoID=function(){"use strict";return this.$MVideoPlayerController2[0]};s.prototype.play=function(a){"use strict";this.emit("playRequested",a),this.sendPlayRequest(a)};s.prototype.prepareForPlay=function(){"use strict";var a=g.get(this.$MVideoPlayerController3),b=a&&a.src;b&&m.prepareVideo(b,a)};s.prototype.sendPlayRequest=function(a){"use strict";var b=!0,c=g.get(this.$MVideoPlayerController3);c=c&&c.src;var d=null;c&&(d=m.getPreparedVideo(c));k.showPlayer(null,this.$MVideoPlayerController3,b,a,d);k.play(a)};s.prototype.pause=function(a){"use strict";this.emit("pauseRequested",a),k.pause(a)};s.prototype.isAutoplayable=function(){"use strict";return!1};s.prototype.getDOMPosition=function(){"use strict";return j(this.getRootNode())};s.prototype.setState=function(a){"use strict";this.$MVideoPlayerController4=a,this.emit("stateChange")};s.prototype.isState=function(a){"use strict";return this.$MVideoPlayerController4===a};s.prototype.getVideoNode=function(){"use strict";return this.$MVideoPlayerController3};s.prototype.getRootNode=function(){"use strict";return this.$MVideoPlayerController1};s.prototype.setLastActionReason=function(a){"use strict";this.$MVideoPlayerController5=a,a&&k.setLastActionReason(a)};s.prototype.getLastActionReason=function(){"use strict";return this.$MVideoPlayerController5};s.prototype.preload=function(){"use strict";var a=g.get(this.$MVideoPlayerController3);a=a&&a.src;a&&l.loadVideo(a)};s.prototype.isPreloaded=function(){"use strict";var a=g.get(this.$MVideoPlayerController3);a=a&&a.src;return a&&l.isVideoPreloaded(a)};s.$MVideoPlayerController7=function(){"use strict";__p&&__p();if(q)return;q=[n.listen("m:video:player:play",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiBeginPlayback(a)}),n.listen("m:video:player:pause",null,function(a){var b=s.$MVideoPlayerController8(a);a=!!(a.getData()&&a.getData().destroyed);s.handleApiPausePlayback(b,a)}),n.listen("m:video:player:ended",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiFinishPlayback(a)}),n.listen("m:video:player:volumechange",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiVolumeChange(a)}),n.listen("m:video:player:fullscreenchange",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiFullScreenChange(a)}),n.listen("m:video:player:prepare",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiPrepare(a)}),n.listen("m:video:player:destroy",null,function(a){a=s.$MVideoPlayerController8(a);s.handleApiDestroyed(a)})];h(function(){q&&(q.forEach(function(a){return a.remove()}),q=null)})};s.handleApiBeginPlayback=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController9()};s.handleApiPausePlayback=function(a,b){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController10(b)};s.handleApiFinishPlayback=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController11()};s.handleApiVolumeChange=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController12()};s.handleApiFullScreenChange=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController13()};s.handleApiDestroyed=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController14()};s.handleApiPrepare=function(a){"use strict";a=g.get(a)[p];a&&a.$MVideoPlayerController15()};s.prototype.$MVideoPlayerController9=function(){"use strict";this.setState("playing")};s.prototype.$MVideoPlayerController10=function(a){"use strict";!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};s.prototype.$MVideoPlayerController11=function(){"use strict";this.setState("finished")};s.prototype.$MVideoPlayerController12=function(){"use strict";this.emit("volumeChange")};s.prototype.$MVideoPlayerController13=function(){"use strict";this.emit("fullscreenChange")};s.prototype.$MVideoPlayerController14=function(){"use strict";this.setState("ready"),this.emit("destroyed")};s.prototype.$MVideoPlayerController15=function(){"use strict";this.emit("prepare")};s.prototype.$MVideoPlayerController6=function(a){"use strict";var b={};b[p]=this;g.set(a,b)};s.$MVideoPlayerController8=function(a){"use strict";a=a.getData();return a&&a.videoElement};s.isBrowserAutoplayEnabled=function(){"use strict";if(r===null){var a=document.createElement("video");a.muted=!0;a.play();r=!a.paused;a.pause()}return r};e.exports=s}),null);
__d("VideoAutoplayValues",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ON:"on",OFF:"off",DOWNLOADED_ONLY:"downloaded_only",WIFI_ONLY:"wifi_only",DEFAULT_AUTOPLAY:"default_autoplay"})}),null);
__d("MFeedVideoPlayerController",["destroyOnUnload","getViewportDimensions","MVideoAutoplayPlayerBase","MVideoCache","MVideoCacheCleanUp","MVideoExperiments","MVideoAutoplayConfig","MVideoDownloadState","MVideoDownloadStateHandler","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","MFullScreen","VideoAutoplayValues","VideoPlayerReason"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v,w=.5;b=babelHelpers.inherits(a,i);v=b&&b.prototype;function a(a,b){"use strict";v.constructor.call(this),this.$MFeedVideoPlayerController1=b,this.$MFeedVideoPlayerController2=a,this.$MFeedVideoPlayerController3=b.controller,this.$MFeedVideoPlayerController5=!1,this.$MFeedVideoPlayerController4=[],g(function(){this.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),this.$MFeedVideoPlayerController4=[]}.bind(this)),this.$MFeedVideoPlayerController6(),this.$MFeedVideoPlayerController1.should_autoplay&&this.$MFeedVideoPlayerController7()}a.prototype.$MFeedVideoPlayerController7=function(){"use strict";q.isBrowserAutoplayEnabled()&&!j.isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&m.autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};a.prototype.$MFeedVideoPlayerController8=function(){"use strict";__p&&__p();var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a===t.OFF)return!1;else if(j.isVideoDownloaded(this.getVideoID()))return!1;else if(a===t.WIFI_ONLY&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a===t.ON&&this.$MFeedVideoPlayerController9())return!0;return!1};a.prototype.$MFeedVideoPlayerController9=function(a){"use strict";var b=r.getNetworkBandwidth();if(!b)if(l.desktop_no_bandwidthmax)return!0;else b=0;var c=r.getConnectivityType(),d=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:m.autoplay_bandwidth_threshold_mbps;c=(!a||c===a)&&b>=d;return c};a.prototype.isVisible=function(){"use strict";return this.$MFeedVideoPlayerController3.isFullscreen()||s.isFullScreen()?!0:r.isVisible(this.getDOMPosition())};a.prototype.getDistanceToViewport=function(){"use strict";if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=h().height,b=this.getDOMPosition();if(b.height===0)return-Infinity;b=b.y+(1-w)*b.height;return b-a/2};a.prototype.playWithoutUnmute=function(a){"use strict";this.$MFeedVideoPlayerController3.play(a)};a.prototype.prepareForPlay=function(){"use strict";!j.isVideoDownloaded(this.getVideoID())&&m.autoplay_prefetch_enabled&&m.autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};a.prototype.pause=function(a){"use strict";this.$MFeedVideoPlayerController3.pause(a)};a.prototype.isAutoplayable=function(){"use strict";var a=!1,b=this.getVideoID();q.isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(j.isVideoDownloaded(b)?a=!1:this.$MFeedVideoPlayerController8()&&(m.autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};a.prototype.getDOMPosition=function(){"use strict";return this.$MFeedVideoPlayerController3.getDOMPosition()};a.prototype.isLooping=function(){"use strict";return!1};a.prototype.getVideoID=function(){"use strict";return this.$MFeedVideoPlayerController3.getVideoID()};a.prototype.$MFeedVideoPlayerController6=function(){"use strict";var a=[["stateChange",function(a){return this.$MFeedVideoPlayerController10(a)}.bind(this)]],b=function(event){return this.emit.bind(this,event)}.bind(this);this.$MFeedVideoPlayerController4=a.map(function(a){return this.$MFeedVideoPlayerController3.addListener(a[0],a[1])}.bind(this)).concat(p.map(function(a){return this.$MFeedVideoPlayerController3.addListener(a,b(a))}.bind(this)));o.listen(this.getVideoID(),function(a){return this.$MFeedVideoPlayerController11(a)}.bind(this))};a.prototype.$MFeedVideoPlayerController10=function(){"use strict";this.$MFeedVideoPlayerController12()};a.prototype.$MFeedVideoPlayerController12=function(){"use strict";(!this.isState("playing")&&this.getLastActionReason()===u.USER||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};a.prototype.$MFeedVideoPlayerController11=function(a){"use strict";a.state===n.DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};a.prototype.isState=function(a){"use strict";return this.$MFeedVideoPlayerController3.isState(a)};a.prototype.getLastActionReason=function(){"use strict";return this.$MFeedVideoPlayerController3.getLastActionReason()};a.prototype.setLastActionReason=function(a){"use strict";this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};e.exports=a}),null);
__d("debounce",["clearTimeout","debounceCore","setTimeout"],(function(a,b,c,d,e,f,g,h,i){function a(a,b,c,d){b==null&&(b=100);var e=function(a,b,c){return i(a,b,c,!d)};return h(a,b,c,e,g)}e.exports=a}),18);
__d("MVideoAutoplayControllerBase",["destroyOnUnload","debounce","MVideoExperiments","Stratcom","SubscriptionsHandler","throttle","VideoPlayerReason","Visibility"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();function a(a){"use strict";this.$3=null,this.$2=null,this.$6=[],this.$1=a,this.$4=null,this.$5=new k(),g(function(){this.$6=[],this.$3=null,this.$4&&(this.$4.remove(),this.$4=null),this.$5.release()}.bind(this))}a.prototype.getVideoUnits=function(){"use strict";return this.$6};a.prototype.setVideoUnits=function(a){"use strict";this.$6=a};a.prototype.addVideoUnit=function(a){"use strict";this.$6.push(a)};a.prototype.getPlayingVideoUnit=function(){"use strict";return this.$3};a.prototype.setPlayingVideoUnit=function(a){"use strict";this.$3=a};a.prototype.playVideo=function(a,b){"use strict";this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};a.prototype.addSubscriberVideoUnit=function(){"use strict";this.getVideoUnits().length||(this.$5.addSubscriptions(j.listen("resize",null,this.updateAutoplay.bind(this)),j.listen("blur",null,this.$8.bind(this)),j.listen("focus",null,this.$9.bind(this)),n.addListener(n.HIDDEN,this.$8.bind(this)),n.addListener(n.VISIBLE,this.$9.bind(this)),j.listen("MScrollArea:scrollend",null,l(this.updateAutoplay.bind(this),this.$1)),j.listen("MScrollArea:scroll",null,l(this.updateAutoplay.bind(this),this.$1)),j.listen("MScrollArea:create",null,l(this.updateAutoplay.bind(this),this.$1)),j.listen("MScrollArea:reflow",null,l(this.updateAutoplay.bind(this),this.$1))),this.$10()||this.$11())};a.prototype.$8=function(){"use strict";this.autoplayActive()&&!this.$2&&(this.$2=this.getPlayingVideoUnit(),this.pausePlayingVideo(m.PAGE_VISIBILITY))};a.prototype.$9=function(){"use strict";this.autoplayActive()&&this.$2&&(this.playVideo(this.$2,m.PAGE_VISIBILITY),this.$2=null)};a.prototype.$11=function(){"use strict";this.$4&&(this.$4.remove(),this.$4=null),this.$7=l(this.updateAutoplay.bind(this),this.$1),this.$4=j.listen("scroll",null,this.$12.bind(this))};a.prototype.$12=function(){"use strict";this.$7()};a.prototype.$10=function(){"use strict";return!!this.$4};a.prototype.getClosestVideoUnits=function(a,b){"use strict";return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};a.prototype.getVisibleUnits=function(){"use strict";var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};a.prototype.pausePlayingVideo=function(a){"use strict";var b=this.$3;b&&(b.pause(a),this.$3=null)};a.prototype.updateAutoplay=function(){"use strict";throw new Error("Should be overridden")};a.prototype.autoplayActive=function(){"use strict";throw new Error("Should be overridden")};e.exports=a}),null);
__d("MVideoAutoplayControllerX",["destroyOnUnload","getViewportDimensions","MVideoAutoplayControllerBase","setImmediate","SubscriptionsHandler","VideoPlayerReason"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m,n=null,o=500;a=babelHelpers.inherits(p,i);m=a&&a.prototype;function p(){"use strict";m.constructor.call(this,o),this.$MVideoAutoplayControllerX1=!0,this.$MVideoAutoplayControllerX2=new k(),this.$MVideoAutoplayControllerX3=null,g(function(){this.$MVideoAutoplayControllerX4(),this===n&&(n=null)}.bind(this))}p.registerVideoUnit=function(a){"use strict";n==null&&(n=new p()),n.addSubscriberVideoUnit(),n.addVideoUnit(a),n.$MVideoAutoplayControllerX5(a),a.isVisible()&&n.updateAutoplay()};p.setShouldAutoplay=function(a){"use strict";n==null&&(n=new p()),n.$MVideoAutoplayControllerX1=a,n.updateAutoplay()};p.prototype.$MVideoAutoplayControllerX4=function(){"use strict";this.$MVideoAutoplayControllerX2.release()};p.prototype.$MVideoAutoplayControllerX6=function(a){"use strict";a&&(a.setLastActionReason(l.USER),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};p.prototype.$MVideoAutoplayControllerX5=function(a){"use strict";__p&&__p();if(!a.addListener)return;var b=function(){this.getPlayingVideoUnit()==a&&a.isState("paused")||this.getPlayingVideoUnit()!=a&&a.isState("playing")?this.$MVideoAutoplayControllerX6(a):a==this.$MVideoAutoplayControllerX3&&a.isState("finished")&&this.$MVideoAutoplayControllerX6(null)}.bind(this),c=function(){(a.isState("playing")||a.isState("paused"))&&this.$MVideoAutoplayControllerX6(a)}.bind(this),d=function(){this.getPlayingVideoUnit()!=a&&this.$MVideoAutoplayControllerX6(a)}.bind(this),e=function(){this.updateAutoplay()}.bind(this),f=function(){this.$MVideoAutoplayControllerX3&&this.$MVideoAutoplayControllerX3==a&&this.$MVideoAutoplayControllerX6(null)}.bind(this);this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",b),this.$MVideoAutoplayControllerX7(a,"prepare",d),this.$MVideoAutoplayControllerX7(a,"volumeChange",c),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",c),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",e),this.$MVideoAutoplayControllerX7(a,"destroyed",f))};p.prototype.$MVideoAutoplayControllerX7=function(a,event,b){"use strict";a=a.addListener(event,function(){j(function(){b()})});return a};p.prototype.autoplayActive=function(){"use strict";this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};p.prototype.updateAutoplay=function(){"use strict";__p&&__p();if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo(l.AUTOPLAY);return}var a=this.getVisibleUnits(),b=a.length,c=null;if(b==1)c=a[0],c=c.isAutoplayable()?c:null;else if(b>1){var d=h().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-d);a.playPriority=b;(!c||typeof c.playPriority==="number"&&a.playPriority<c.playPriority)&&(c=a)})}this.getPlayingVideoUnit()?c!=this.getPlayingVideoUnit()&&(this.pausePlayingVideo(l.AUTOPLAY),this.playVideo(c,l.AUTOPLAY)):c&&this.playVideo(c,l.AUTOPLAY);b=this.getClosestVideoUnits(2,!0);a=b.length;var e=null;for(var f=0;f<a;f++)if(b[f]!==c){e=b[f];break}e&&e.prepareForPlay()};e.exports=p}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f,g,h){a={registerVideoUnit:function(a,b){a=new g(a,b);h.registerVideoUnit(a)}};e.exports=a}),null);