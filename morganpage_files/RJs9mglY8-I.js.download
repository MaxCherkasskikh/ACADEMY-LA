if (self.CavalryLogger) { CavalryLogger.start_js(["CWPZI"]); }

__d("MPlatformDialog",["CSS","DOM","cx","invariant"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=null,l=!1,m=!1,n=[];function a(a,b){"use strict";__p&&__p();this.$1=a,this.$2=b,l=!1,m=!1,k=this,h.listen(a,"submit",null,function(b){__p&&__p();if(!m&&!k.runValidators()){b.kill();return}if(!l){l=!0;return}b.kill();g.addClass(a,"_2row")})}a.prototype.addValidator=function(a){"use strict";n.push(a)};a.prototype.runValidators=function(){"use strict";for(var a=0;a<n.length;a++){var b=n[a]();if(!b)return!1}return!0};a.prototype.submit=function(a,b){"use strict";if(a==="__CONFIRM__"){if(!this.runValidators())return}else m=!0;(!l||a==="__CANCEL__")&&(l=!0,g.addClass(this.$1,"_2row"),h.appendContent(this.$1,h.create("input",{type:"hidden",name:a,value:b})),a==="__CONFIRM__"&&this.$2?this.$1.onsubmit():this.$1.submit())};a.prototype.close=function(){"use strict";h.appendContent(this.$1,h.create("input",{type:"hidden",name:"__CANCEL__",value:"cancel"})),this.$1.submit()};a.addValidator=function(a){k!==null||j(0),k.addValidator(a)};a.submit=function(a,b){k!==null||j(0),k.submit(a,b)};a.close=function(){k!==null||j(0),k.close()};e.exports=a}),null);
__d("MPlatformDialogMSite",["Stratcom","MPlatformDialog"],(function(a,b,c,d,e,f,g,h){a={button:function(a,b){g.listen("click","dialog-header-button-"+a,h.submit.bind(null,a,b))}};e.exports=a}),null);
__d("BanzaiLogger",["Banzai"],(function(a,b,c,d,e,f,g){var h="logger";function a(a){return{log:function(b,c){g.post(i._getRoute(b),c,a)},registerToSendWithBeacon:function(a,b,c,d){g.registerToSendWithBeacon(i._getRoute(a),b,c,d)},_getRoute:function(a){return h+":"+a}}}var i=a();i.create=a;e.exports=i}),null);
__d("StrSet",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){"use strict";this.$2={},this.$1=0,a&&this.addAll(a)}g.prototype.add=function(a){"use strict";Object.prototype.hasOwnProperty.call(this.$2,a)||(this.$2[a]=!0,this.$1++);return this};g.prototype.addAll=function(a){"use strict";a.forEach(this.add,this);return this};g.prototype.remove=function(a){"use strict";Object.prototype.hasOwnProperty.call(this.$2,a)&&(delete this.$2[a],this.$1--);return this};g.prototype.removeAll=function(a){"use strict";a.forEach(this.remove,this);return this};g.prototype.toArray=function(){"use strict";return Object.keys(this.$2)};g.prototype.toMap=function(a){"use strict";var b={};Object.keys(this.$2).forEach(function(c){b[c]=typeof a=="function"?a(c):a||!0});return b};g.prototype.contains=function(a){"use strict";return Object.prototype.hasOwnProperty.call(this.$2,a)};g.prototype.count=function(){"use strict";return this.$1};g.prototype.clear=function(){"use strict";this.$2={};this.$1=0;return this};g.prototype.clone=function(){"use strict";return new g(this)};g.prototype.forEach=function(a,b){"use strict";Object.keys(this.$2).forEach(a,b)};g.prototype.map=function(a,b){"use strict";return Object.keys(this.$2).map(a,b)};g.prototype.some=function(a,b){"use strict";return Object.keys(this.$2).some(a,b)};g.prototype.every=function(a,b){"use strict";return Object.keys(this.$2).every(a,b)};g.prototype.filter=function(a,b){"use strict";return new g(Object.keys(this.$2).filter(a,b))};g.prototype.union=function(a){"use strict";return this.clone().addAll(a)};g.prototype.intersect=function(a){"use strict";return this.filter(function(b){return a.contains(b)})};g.prototype.difference=function(a){"use strict";return a.filter(function(a){return!this.contains(a)}.bind(this))};g.prototype.equals=function(a){"use strict";__p&&__p();var b=function(a,b){return a===b?0:a<b?-1:1},c=this.toArray();a=a.toArray();if(c.length!==a.length)return!1;var d=c.length;c=c.sort(b);a=a.sort(b);while(d--)if(c[d]!==a[d])return!1;return!0};e.exports=g}),null);
__d("XOauthEditPermissionsNuxAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/oauth/editpermissionsnux/",{})}),null);
__d("debounceCore",["TimeSlice"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b,c,d,e){__p&&__p();d=d||setTimeout;e=e||clearTimeout;var f=void 0;function h(){for(var e=arguments.length,i=Array(e),j=0;j<e;j++)i[j]=arguments[j];h.reset();var k=g.guard(function(){f=null,a.apply(c,i)},"debounceCore");k.__SMmeta=a.__SMmeta;f=d(k,b)}h.reset=function(){e(f),f=null};h.isPending=function(){return f!=null};return h}e.exports=a}),18);
__d("intlList",["React","fbt","invariant","keyMirror"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=j({AND:null,NONE:null,OR:null}),l=j({COMMA:null,SEMICOLON:null});a=function(a,b,c){__p&&__p();b=b||k.AND;c=c||l.COMMA;var d=a.length;if(d===0)return"";else if(d===1)return a[0];var e=a[d-1],f=a[0];for(var g=1;g<d-1;++g)switch(c){case l.SEMICOLON:f=h._("{previous items}; {following items}",[h._param("previous items",f),h._param("following items",a[g])]);break;default:f=h._("{previous items}, {following items}",[h._param("previous items",f),h._param("following items",a[g])])}return m(f,e,b,c)};function m(a,b,c,d){switch(c){case k.AND:return h._("{list of items} and {last item}",[h._param("list of items",a),h._param("last item",b)]);case k.OR:return h._("{list of items} or {last item}",[h._param("list of items",a),h._param("last item",b)]);case k.NONE:switch(d){case l.SEMICOLON:return h._("{previous items}; {last item}",[h._param("previous items",a),h._param("last item",b)]);default:return h._("{list of items}, {last item}",[h._param("list of items",a),h._param("last item",b)])}default:i(0)}}a.DELIMITERS=l;a.CONJUNCTIONS=k;e.exports=a}),null);
__d("MPlatformOAuthDialogV4",["Banzai","BanzaiLogger","CancelableEventListener","CSS","DOM","MRequest","Stratcom","StrSet","Style","XOauthEditPermissionsNuxAsyncController","cx","intlList","getOuterHeight","getStyleProperty","debounceCore"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();a=navigator.userAgent;b=/iPod/.test(a);c=/iPhone/.test(a);d=/iPad/.test(a);var v=c||d||b,w=v&&/Safari/.test(a);f=v&&a.match(/OS ([0-9]+)/);var x=v&&f&&f.length>1&&parseInt(f[1],10)>=9,y="perm_declined",z="edit_info_clicked",A="back_clicked",B="back_clicked_after_declined",C="dialog_rendered",D="orientation_changed",E="time_on_initial_page",F="time_on_edit_permissions",G="total_time";function H(a,b){return a.getElementsByClassName(b)[0]}function I(){return window.innerHeight<window.innerWidth}l={init:function(a,b,c,d,e,f,i,l,o,p,q,r){__p&&__p();var t=this;this._loggedEvents=new n();this._appID=f;this._step=i;this._loginID=l;this._startTime=Date.now();this._lastTime=this._startTime;this._orderedPermissions=q;this._eventName=E;this._originalScopes=document.getElementsByName(i)[0].value.split(",");this._isToSExpired=r;g.isEnabled("platform_oauth_client_events")&&(this._banzaiLogger=h.create({signal:!0}));function A(c){e?(a.className="_5o-g"+(c?"":" _5poc")+(c?" _5pod":"")+" _5o-h",b.className="_5o-g _5o-i"+(c?" _5poe":"")+(c?"":" _5pof")):(a.style.zIndex=c?0:1,a.style.opacity=c?0:1,b.style.zIndex=c?1:0,b.style.opacity=c?1:0)}w&&x&&m.invoke("mviewport:force-update");var B=document.getElementById("platformDialogForm"),G=document.getElementById("viewport");document.getElementById("root");var J=null,K=H(document,"_v3r");c&&(c.getBoundingClientRect(),J=H(document,"_2u9p"));var L=k.scry(G,"*","MOauthDialogHeader")[0];J=L!=null?L.children[0]:null;o=null;var M=H(B,"_5o-s");try{!p?o=k.find(document,"button","skip"):o=k.find(document,"button","cancel")}catch(a){o=null}var N=H(document,"flexbox")!=null;function O(){__p&&__p();document.documentElement.style.height=window.innerHeight+"px";document.getElementsByName("screen_height")[0].value=window.innerHeight;document.getElementsByName("screen_width")[0].value=window.innerWidth;var c=H(G,"_1owb");H(b,"_5ovi");H(b,"_5ovl");K&&(I()?(k.remove(K),B.sheet_name.value=="initial"?k.appendContent(c,K):k.remove(K)):(k.remove(K),k.prependContent(M,K),B.sheet_name.value=="initial"?j.show(K):j.hide(K)));B.sheet_name.value=="initial"?(v&&j.removeClass(M,"_1gyg"),this._isHeaderRemoved&&L&&(k.prependContent(L,J),this._isHeaderRemoved=!1)):I()?(v&&j.addClass(M,"_1gyg"),L&&(k.remove(J),this._isHeaderRemoved=!0)):this._isHeaderRemoved&&L&&(k.prependContent(L,J),this._isHeaderRemoved=!1);N||(b.style.bottom=s(M)+"px",a.style.bottom=s(M)+"px");m.invoke("mviewport:update")}O();function P(a){B.sheet_name.value=a}m.listen("m:viewport:update-complete",null,function(){setTimeout(d.reflow.bind(d),1e3)});if(c){(function(){function a(a,b){b._logEventOnce(z),a.kill(),d.reflow(),d.scrollToTop(),A(!0),P("detail"),O()}k.listen(c,"click",null,function(b){this._logTimeSpent(),this._eventName=F,a(b,this)}.bind(t));f=H(document,"_ff5");f!=null&&(k.remove(f),l=H(document,"_5pod")==null,l||c.click())})()}d.addListener("go-back",function(a){this._logTimeSpent(),this._eventName=E,this._logGoBackEvent(),A(!1),this._orderedPermissions!==null?this._updatePermissionText():d.reset(),P("initial"),O()}.bind(this));q=k.find(document,"button","confirm");q&&k.listen(q,"click",null,function(a){this._logTimeSpent(),this._logTotalTime()}.bind(this));o&&k.listen(o,"click",null,function(a){this._logTimeSpent(),this._logTotalTime()}.bind(this));d.addListener("perm-declined",function(a){this._banzaiLogger.log("PlatformOAuthDialogClientEventsLoggerConfig",{app_id:this._appID,login_id:this._loginID,event_name:y,step:this._step,scope:a})}.bind(this));m.listen("resize",null,u(O,100));m.listen("orientationchange",null,function(a){O(),this._banzaiLogger.log("PlatformOAuthDialogClientEventsLoggerConfig",{app_id:this._appID,login_id:this._loginID,event_name:D,step:this._step,height:window.innerHeight,width:window.innerWidth})}.bind(this));this._logEventOnce(C)},_logTimeSpent:function(){var a=Date.now(),b=a-this._lastTime;this._banzaiLogger.log("PlatformOAuthDialogClientEventsLoggerConfig",{app_id:this._appID,event_name:this._eventName,step:this._step,login_id:this._loginID,time_spent_milli:b,start_time:this._lastTime,end_time:Date.now()});this._lastTime=a},_logTotalTime:function(){this._eventName=G,this._lastTime=this._startTime,this._logTimeSpent()},_logGoBackEvent:function(){var a=document.getElementsByName(this._step)[0].value.split(","),event=a.length<this._originalScopes.length?B:A;this._logEventOnce(event)},_logEventOnce:function(event){this._banzaiLogger&&!this._loggedEvents.contains(event)&&(this._loggedEvents.add(event),this._banzaiLogger.log("PlatformOAuthDialogClientEventsLoggerConfig",{app_id:this._appID,login_id:this._loginID,event_name:event,step:this._step,height:window.innerHeight,width:window.innerWidth}))},_updatePermissionText:function(){__p&&__p();var a=document.getElementById("permissions_list"),b=document.getElementById("platformDialogForm"),c=H(document,"_35r5"),d=H(document,"_35q-");b=b[this._step];if(b.value.trim().length<=0){j.removeClass(d,"_4h9a");j.hide(c);j.show(d);return}b=b.value.split(",");var e=[];j.show(c);j.hide(d);for(var c=this._orderedPermissions,d=Array.isArray(c),f=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;b.indexOf(g.name)>-1&&e.push(g.phrase)}g=this._isToSExpired?r.CONJUNCTIONS.NONE:r.CONJUNCTIONS.AND;k.setContent(a,r(e,g))},disableDoubleTap:function(a,b){var c=null;i.listen(a,"touchstart",b,function(a){var b=a.getRawEvent(),d=b.timeStamp,e=c||d;e=d-e;var f=1;b.touches&&b.touches.length&&(f=b.touches.length);f<2&&e>0&&e<=500&&a.kill();c=d})}};e.exports=l}),null);