if (self.CavalryLogger) { CavalryLogger.start_js(["bOeor"]); }

__d("AbstractCommentLiveTypingXHRController",["destroyOnUnload","ex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={START:"start",STOP:"stop"},j=10*1e3;function a(a,b,c){var d=arguments.length<=3||arguments[3]===undefined?null:arguments[3];this.$5=a;this.$6=b;this.$7=c;this.$1=d;this.$2=!1;this.$3=0;this.$4=null;g(this.destroy.bind(this))}a.prototype.destroy=function(){this.$1&&this.$1.destroy(),this.$1=null,this.$2=!1,this.$3=0,this.$4=null};a.prototype.bootloadPublisherModule=function(a){throw new Error(h("bootloadPublisherModule not implemented, should be overridden by subclass"))};a.prototype.$8=function(a){a=new a(this.$5,this.$6,this.$7);var b=Date.now(),c=this.$3;if(c&&c+j>=b){c=this.$4;c===i.START?a.handleStartEvent():c===i.STOP&&a.handleStopEvent()}this.$1=a};a.prototype.$9=function(){if(this.$2||!this.$5)return;this.$2=!0;this.bootloadPublisherModule(this.$8.bind(this))};a.prototype.attemptPublishStartEvent=function(){this.$4=i.START,this.$3=Date.now(),this.$1?this.$1.handleStartEvent():this.$2||this.$9()};a.prototype.attemptPublishStopEvent=function(){this.$4=i.STOP,this.$3=Date.now(),this.$1?this.$1.handleStopEvent():this.$2||this.$9()};e.exports=a}),null);